"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl,globalTranslate, Form, PbxApi */
var networks = {
  $getMyIpButton: $('#getmyip'),
  $formObj: $('#network-form'),
  $dropDowns: $('#network-form .dropdown'),
  $extipaddr: $('#extipaddr'),
  $ipaddressInput: $('.ipaddress'),
  vlansArray: {},
  validateRules: {
    gateway: {
      optional: true,
      rules: [{
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    },
    primarydns: {
      optional: true,
      rules: [{
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    },
    secondarydns: {
      optional: true,
      rules: [{
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    },
    extipaddr: {
      optional: true,
      rules: [{
        type: 'ipaddrWithPortOptional',
        prompt: globalTranslate.nw_ValidateExtIppaddrNotRight
      }, {
        type: 'extenalIpHost',
        prompt: globalTranslate.nw_ValidateExtIppaddrOrHostIsEmpty
      }]
    },
    exthostname: {
      depends: 'usenat',
      rules: [{
        type: 'extenalIpHost',
        prompt: globalTranslate.nw_ValidateExtIppaddrOrHostIsEmpty
      }]
    }
  },
  initialize: function initialize() {
    networks.toggleDisabledFieldClass();
    $('#eth-interfaces-menu .item').tab();
    $('#usenat-checkbox').checkbox({
      onChange: function onChange() {
        networks.toggleDisabledFieldClass();
      }
    });
    networks.$dropDowns.dropdown();
    $('.dhcp-checkbox').checkbox({
      onChange: function onChange() {
        networks.toggleDisabledFieldClass();
      }
    });
    networks.$getMyIpButton.on('click', function (e) {
      e.preventDefault();
      networks.$getMyIpButton.addClass('loading disabled');
      PbxApi.GetExternalIp(networks.cbAfterGetExternalIp);
    }); // Удаление дополнительного сетевого интерфейса

    $('.delete-interface').api({
      url: "".concat(globalRootUrl, "network/delete/{value}"),
      method: 'POST',
      beforeSend: function beforeSend(settings) {
        $(this).addClass('loading disabled');
        return settings;
      },
      onSuccess: function onSuccess(response) {
        $(this).removeClass('loading disabled');
        $('.ui.message.ajax').remove();
        $.each(response.message, function (index, value) {
          networks.$formObj.after("<div class=\"ui ".concat(index, " message ajax\">").concat(value, "</div>"));
        });
        if (response.success) window.location.reload();
      },
      onFailure: function onFailure(response) {
        $(this).removeClass('loading disabled');
        $('form').after(response);
      }
    }); // Очистка настроек дополнительного сетевого

    $('.delete-interface-0').on('click', function () {
      var initialValues = {
        interface_0: '',
        name_0: '',
        dhcp_0: 'on',
        ipaddr_0: '',
        subnet_0: '0'
      };
      networks.$formObj.form('set values', initialValues);
      $('#interface_0').dropdown('restore defaults');
      $('#dhcp-0-checkbox').checkbox('check');
      $('#eth-interfaces-menu .item').tab('change tab', $('#eth-interfaces-menu a.item').first().attr('data-tab'));
    });
    networks.$ipaddressInput.inputmask({
      alias: 'ip',
      'placeholder': '_'
    });
    networks.initializeForm();
  },

  /**
   * Gets external IP by request to remote server
   */
  cbAfterGetExternalIp: function cbAfterGetExternalIp(response) {
    if (response === false) {
      networks.$getMyIpButton.removeClass('loading disabled');
    } else {
      networks.$formObj.form('set value', 'extipaddr', response.ip);
      networks.$extipaddr.trigger('change');
      networks.$getMyIpButton.removeClass('loading disabled');
    }
  },
  toggleDisabledFieldClass: function toggleDisabledFieldClass() {
    $('#eth-interfaces-menu a').each(function (index, obj) {
      var eth = $(obj).attr('data-tab');

      if ($("#dhcp-".concat(eth, "-checkbox")).checkbox('is unchecked')) {
        $("#ip-address-group-".concat(eth)).removeClass('disabled');
        $("#not-dhcp-".concat(eth)).val('1');
      } else {
        $("#ip-address-group-".concat(eth)).addClass('disabled');
        $("#not-dhcp-".concat(eth)).val('');
      }

      networks.addNewFormRules(eth);
    });

    if ($('#usenat-checkbox').checkbox('is checked')) {
      $('.nated-settings-group').removeClass('disabled');
    } else {
      $('.nated-settings-group').addClass('disabled');
    }
  },
  addNewFormRules: function addNewFormRules(newRowId) {
    var nameClass = "name_".concat(newRowId);
    networks.validateRules[nameClass] = {
      identifier: nameClass,
      depends: "interface_".concat(newRowId),
      rules: [{
        type: 'empty',
        prompt: globalTranslate.nw_ValidateNameIsNotBeEmpty
      }]
    };
    var vlanClass = "vlanid_".concat(newRowId);
    networks.validateRules[vlanClass] = {
      depends: "interface_".concat(newRowId),
      identifier: vlanClass,
      rules: [{
        type: 'integer[0..4095]',
        prompt: globalTranslate.nw_ValidateVlanRange
      }, {
        type: "checkVlan[".concat(newRowId, "]"),
        prompt: globalTranslate.nw_ValidateVlanCross
      }]
    };
    var ipaddrClass = "ipaddr_".concat(newRowId);
    networks.validateRules[ipaddrClass] = {
      identifier: ipaddrClass,
      depends: "not-dhcp-".concat(newRowId),
      rules: [{
        type: 'empty',
        prompt: globalTranslate.nw_ValidateIppaddrIsEmpty
      }, {
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    };
    var dhcpClass = "dhcp_".concat(newRowId);
    networks.validateRules[dhcpClass] = {
      identifier: dhcpClass,
      depends: "interface_".concat(newRowId),
      rules: [{
        type: "dhcpOnVlanNetworks[".concat(newRowId, "]"),
        prompt: globalTranslate.nw_ValidateDHCPOnVlansDontSupport
      }]
    };
  },
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = networks.$formObj.form('get values');
    return result;
  },
  cbAfterSendForm: function cbAfterSendForm() {},
  initializeForm: function initializeForm() {
    Form.$formObj = networks.$formObj;
    Form.url = "".concat(globalRootUrl, "network/save");
    Form.validateRules = networks.validateRules;
    Form.cbBeforeSendForm = networks.cbBeforeSendForm;
    Form.cbAfterSendForm = networks.cbAfterSendForm;
    Form.initialize();
  }
};

$.fn.form.settings.rules.ipaddr = function (value) {
  var result = true;
  var f = value.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);

  if (f == null) {
    result = false;
  } else {
    for (var i = 1; i < 5; i += 1) {
      var a = f[i];

      if (a > 255) {
        result = false;
      }
    }

    if (f[5] > 32) {
      result = false;
    }
  }

  return result;
};

$.fn.form.settings.rules.ipaddrWithPortOptional = function (value) {
  var result = true;
  var f = value.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})(:[0-9]+)?$/);

  if (f == null) {
    result = false;
  } else {
    for (var i = 1; i < 5; i += 1) {
      var a = f[i];

      if (a > 255) {
        result = false;
      }
    }

    if (f[5] > 32) {
      result = false;
    }
  }

  return result;
};

$.fn.form.settings.rules.checkVlan = function (vlanValue, param) {
  var result = true;
  var vlansArray = {};
  var allValues = networks.$formObj.form('get values');

  if (allValues.interface_0 !== undefined && allValues.interface_0 > 0) {
    var newEthName = allValues["interface_".concat(allValues.interface_0)];
    vlansArray[newEthName] = [allValues.vlanid_0];

    if (allValues.vlanid_0 === '') {
      result = false;
    }
  }

  $.each(allValues, function (index, value) {
    if (index === 'interface_0' || index === 'vlanid_0') return;

    if (index.indexOf('vlanid') >= 0) {
      var ethName = allValues["interface_".concat(index.split('_')[1])];

      if ($.inArray(value, vlansArray[ethName]) >= 0 && vlanValue === value && param === index.split('_')[1]) {
        result = false;
      } else {
        if (!(ethName in vlansArray)) {
          vlansArray[ethName] = [];
        }

        vlansArray[ethName].push(value);
      }
    }
  });
  return result;
};

$.fn.form.settings.rules.dhcpOnVlanNetworks = function (value, param) {
  var result = true;
  var vlanValue = networks.$formObj.form('get value', "vlanid_".concat(param));
  var dhcpValue = networks.$formObj.form('get value', "dhcp_".concat(param));

  if (vlanValue > 0 && dhcpValue === 'on') {
    result = false;
  }

  return result;
};

$.fn.form.settings.rules.extenalIpHost = function () {
  var allValues = networks.$formObj.form('get values');

  if (allValues.usenat === 'on') {
    if (allValues.exthostname === '' && allValues.extipaddr === '') {
      return false;
    }
  }

  return true;
};

$(document).ready(function () {
  networks.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9OZXR3b3JrL25ldHdvcmstbW9kaWZ5LmpzIl0sIm5hbWVzIjpbIm5ldHdvcmtzIiwiJGdldE15SXBCdXR0b24iLCIkIiwiJGZvcm1PYmoiLCIkZHJvcERvd25zIiwiJGV4dGlwYWRkciIsIiRpcGFkZHJlc3NJbnB1dCIsInZsYW5zQXJyYXkiLCJ2YWxpZGF0ZVJ1bGVzIiwiZ2F0ZXdheSIsIm9wdGlvbmFsIiwicnVsZXMiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwibndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQiLCJwcmltYXJ5ZG5zIiwic2Vjb25kYXJ5ZG5zIiwiZXh0aXBhZGRyIiwibndfVmFsaWRhdGVFeHRJcHBhZGRyTm90UmlnaHQiLCJud19WYWxpZGF0ZUV4dElwcGFkZHJPckhvc3RJc0VtcHR5IiwiZXh0aG9zdG5hbWUiLCJkZXBlbmRzIiwiaW5pdGlhbGl6ZSIsInRvZ2dsZURpc2FibGVkRmllbGRDbGFzcyIsInRhYiIsImNoZWNrYm94Iiwib25DaGFuZ2UiLCJkcm9wZG93biIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiYWRkQ2xhc3MiLCJQYnhBcGkiLCJHZXRFeHRlcm5hbElwIiwiY2JBZnRlckdldEV4dGVybmFsSXAiLCJhcGkiLCJ1cmwiLCJnbG9iYWxSb290VXJsIiwibWV0aG9kIiwiYmVmb3JlU2VuZCIsInNldHRpbmdzIiwib25TdWNjZXNzIiwicmVzcG9uc2UiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImVhY2giLCJtZXNzYWdlIiwiaW5kZXgiLCJ2YWx1ZSIsImFmdGVyIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwib25GYWlsdXJlIiwiaW5pdGlhbFZhbHVlcyIsImludGVyZmFjZV8wIiwibmFtZV8wIiwiZGhjcF8wIiwiaXBhZGRyXzAiLCJzdWJuZXRfMCIsImZvcm0iLCJmaXJzdCIsImF0dHIiLCJpbnB1dG1hc2siLCJhbGlhcyIsImluaXRpYWxpemVGb3JtIiwiaXAiLCJ0cmlnZ2VyIiwib2JqIiwiZXRoIiwidmFsIiwiYWRkTmV3Rm9ybVJ1bGVzIiwibmV3Um93SWQiLCJuYW1lQ2xhc3MiLCJpZGVudGlmaWVyIiwibndfVmFsaWRhdGVOYW1lSXNOb3RCZUVtcHR5IiwidmxhbkNsYXNzIiwibndfVmFsaWRhdGVWbGFuUmFuZ2UiLCJud19WYWxpZGF0ZVZsYW5Dcm9zcyIsImlwYWRkckNsYXNzIiwibndfVmFsaWRhdGVJcHBhZGRySXNFbXB0eSIsImRoY3BDbGFzcyIsIm53X1ZhbGlkYXRlREhDUE9uVmxhbnNEb250U3VwcG9ydCIsImNiQmVmb3JlU2VuZEZvcm0iLCJyZXN1bHQiLCJkYXRhIiwiY2JBZnRlclNlbmRGb3JtIiwiRm9ybSIsImZuIiwiaXBhZGRyIiwiZiIsIm1hdGNoIiwiaSIsImEiLCJpcGFkZHJXaXRoUG9ydE9wdGlvbmFsIiwiY2hlY2tWbGFuIiwidmxhblZhbHVlIiwicGFyYW0iLCJhbGxWYWx1ZXMiLCJ1bmRlZmluZWQiLCJuZXdFdGhOYW1lIiwidmxhbmlkXzAiLCJpbmRleE9mIiwiZXRoTmFtZSIsInNwbGl0IiwiaW5BcnJheSIsInB1c2giLCJkaGNwT25WbGFuTmV0d29ya3MiLCJkaGNwVmFsdWUiLCJleHRlbmFsSXBIb3N0IiwidXNlbmF0IiwiZG9jdW1lbnQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUEsSUFBTUEsUUFBUSxHQUFHO0FBQ2hCQyxFQUFBQSxjQUFjLEVBQUVDLENBQUMsQ0FBQyxVQUFELENBREQ7QUFFaEJDLEVBQUFBLFFBQVEsRUFBRUQsQ0FBQyxDQUFDLGVBQUQsQ0FGSztBQUdoQkUsRUFBQUEsVUFBVSxFQUFFRixDQUFDLENBQUMseUJBQUQsQ0FIRztBQUloQkcsRUFBQUEsVUFBVSxFQUFDSCxDQUFDLENBQUMsWUFBRCxDQUpJO0FBS2hC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QXBGLENBQUMsQ0FBQ3dGLEVBQUYsQ0FBSzVCLElBQUwsQ0FBVXJCLFFBQVYsQ0FBbUI5QixLQUFuQixDQUF5Qm9HLGFBQXpCLEdBQXlDLFlBQU07QUFDOUMsTUFBTVgsU0FBUyxHQUFHcEcsUUFBUSxDQUFDRyxRQUFULENBQWtCMkQsSUFBbEIsQ0FBdUIsWUFBdkIsQ0FBbEI7O0FBQ0EsTUFBSXNDLFNBQVMsQ0FBQ1ksTUFBVixLQUFxQixJQUF6QixFQUErQjtBQUM5QixRQUFJWixTQUFTLENBQUMvRSxXQUFWLEtBQTBCLEVBQTFCLElBQWdDK0UsU0FBUyxDQUFDbEYsU0FBVixLQUF3QixFQUE1RCxFQUFnRTtBQUMvRCxhQUFPLEtBQVA7QUFDQTtBQUNEOztBQUNELFNBQU8sSUFBUDtBQUNBLENBUkQ7O0FBVUFoQixDQUFDLENBQUMrRyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFNO0FBQ3ZCbEgsRUFBQUEsUUFBUSxDQUFDdUIsVUFBVDtBQUNBLENBRkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTWlrb1BCWCAtIGZyZWUgcGhvbmUgc3lzdGVtIGZvciBzbWFsbCBidXNpbmVzc1xuICogQ29weXJpZ2h0IChDKSAyMDE3LTIwMjAgQWxleGV5IFBvcnRub3YgYW5kIE5pa29sYXkgQmVrZXRvdlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS5cbiAqIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuLyogZ2xvYmFsIGdsb2JhbFJvb3RVcmwsZ2xvYmFsVHJhbnNsYXRlLCBGb3JtLCBQYnhBcGkgKi9cblxuY29uc3QgbmV0d29ya3MgPSB7XG5cdCRnZXRNeUlwQnV0dG9uOiAkKCcjZ2V0bXlpcCcpLFxuXHQkZm9ybU9iajogJCgnI25ldHdvcmstZm9ybScpLFxuXHQkZHJvcERvd25zOiAkKCcjbmV0d29yay1mb3JtIC5kcm9wZG93bicpLFxuXHQkZXh0aXBhZGRyOiQoJyNleHRpcGFkZHInKSxcblx0JGlwYWRkcmVzc0lucHV0OiAkKCcuaXBhZGRyZXNzJyksXG5cdHZsYW5zQXJyYXk6IHt9LFxuXHR2YWxpZGF0ZVJ1bGVzOiB7XG5cdFx0Z2F0ZXdheToge1xuXHRcdFx0b3B0aW9uYWw6IHRydWUsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2lwYWRkcicsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0cHJpbWFyeWRuczoge1xuXHRcdFx0b3B0aW9uYWw6IHRydWUsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2lwYWRkcicsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0c2Vjb25kYXJ5ZG5zOiB7XG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnaXBhZGRyJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUlwcGFkZHJOb3RSaWdodCxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRleHRpcGFkZHI6IHtcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpcGFkZHJXaXRoUG9ydE9wdGlvbmFsJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUV4dElwcGFkZHJOb3RSaWdodCxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdleHRlbmFsSXBIb3N0Jyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUV4dElwcGFkZHJPckhvc3RJc0VtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdGV4dGhvc3RuYW1lOiB7XG5cdFx0XHRkZXBlbmRzOiAndXNlbmF0Jyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZXh0ZW5hbElwSG9zdCcsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVFeHRJcHBhZGRyT3JIb3N0SXNFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0fSxcblx0aW5pdGlhbGl6ZSgpIHtcblx0XHRuZXR3b3Jrcy50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHQkKCcjZXRoLWludGVyZmFjZXMtbWVudSAuaXRlbScpLnRhYigpO1xuXG5cdFx0JCgnI3VzZW5hdC1jaGVja2JveCcpLmNoZWNrYm94KHtcblx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRuZXR3b3Jrcy50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cdFx0bmV0d29ya3MuJGRyb3BEb3ducy5kcm9wZG93bigpO1xuXHRcdCQoJy5kaGNwLWNoZWNrYm94Jylcblx0XHRcdC5jaGVja2JveCh7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdG5ldHdvcmtzLnRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0bmV0d29ya3MuJGdldE15SXBCdXR0b24ub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG5ldHdvcmtzLiRnZXRNeUlwQnV0dG9uLmFkZENsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRQYnhBcGkuR2V0RXh0ZXJuYWxJcChuZXR3b3Jrcy5jYkFmdGVyR2V0RXh0ZXJuYWxJcCk7XG5cdFx0fSk7XG5cblx0XHQvLyDQo9C00LDQu9C10L3QuNC1INC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdC+0LPQviDRgdC10YLQtdCy0L7Qs9C+INC40L3RgtC10YDRhNC10LnRgdCwXG5cdFx0JCgnLmRlbGV0ZS1pbnRlcmZhY2UnKS5hcGkoe1xuXHRcdFx0dXJsOiBgJHtnbG9iYWxSb290VXJsfW5ldHdvcmsvZGVsZXRlL3t2YWx1ZX1gLFxuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRiZWZvcmVTZW5kKHNldHRpbmdzKSB7XG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdFx0cmV0dXJuIHNldHRpbmdzO1xuXHRcdFx0fSxcblxuXHRcdFx0b25TdWNjZXNzKHJlc3BvbnNlKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdFx0JCgnLnVpLm1lc3NhZ2UuYWpheCcpLnJlbW92ZSgpO1xuXHRcdFx0XHQkLmVhY2gocmVzcG9uc2UubWVzc2FnZSwgKGluZGV4LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdG5ldHdvcmtzLiRmb3JtT2JqLmFmdGVyKGA8ZGl2IGNsYXNzPVwidWkgJHtpbmRleH0gbWVzc2FnZSBhamF4XCI+JHt2YWx1ZX08L2Rpdj5gKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChyZXNwb25zZS5zdWNjZXNzKSB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHR9LFxuXG5cdFx0XHRvbkZhaWx1cmUocmVzcG9uc2UpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0XHQkKCdmb3JtJykuYWZ0ZXIocmVzcG9uc2UpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vINCe0YfQuNGB0YLQutCwINC90LDRgdGC0YDQvtC10Log0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L7Qs9C+INGB0LXRgtC10LLQvtCz0L5cblx0XHQkKCcuZGVsZXRlLWludGVyZmFjZS0wJykub24oJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0Y29uc3QgaW5pdGlhbFZhbHVlcyA9IHtcblx0XHRcdFx0aW50ZXJmYWNlXzA6ICcnLFxuXHRcdFx0XHRuYW1lXzA6ICcnLFxuXHRcdFx0XHRkaGNwXzA6ICdvbicsXG5cdFx0XHRcdGlwYWRkcl8wOiAnJyxcblx0XHRcdFx0c3VibmV0XzA6ICcwJyxcblx0XHRcdH07XG5cdFx0XHRuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWVzJywgaW5pdGlhbFZhbHVlcyk7XG5cdFx0XHQkKCcjaW50ZXJmYWNlXzAnKS5kcm9wZG93bigncmVzdG9yZSBkZWZhdWx0cycpO1xuXHRcdFx0JCgnI2RoY3AtMC1jaGVja2JveCcpLmNoZWNrYm94KCdjaGVjaycpO1xuXHRcdFx0JCgnI2V0aC1pbnRlcmZhY2VzLW1lbnUgLml0ZW0nKS50YWIoJ2NoYW5nZSB0YWInLCAkKCcjZXRoLWludGVyZmFjZXMtbWVudSBhLml0ZW0nKS5maXJzdCgpLmF0dHIoJ2RhdGEtdGFiJykpO1xuXHRcdH0pO1xuXHRcdG5ldHdvcmtzLiRpcGFkZHJlc3NJbnB1dC5pbnB1dG1hc2soe2FsaWFzOiAnaXAnLCAncGxhY2Vob2xkZXInOiAnXyd9KTtcblxuXHRcdG5ldHdvcmtzLmluaXRpYWxpemVGb3JtKCk7XG5cdH0sXG5cdC8qKlxuXHQgKiBHZXRzIGV4dGVybmFsIElQIGJ5IHJlcXVlc3QgdG8gcmVtb3RlIHNlcnZlclxuXHQgKi9cblx0Y2JBZnRlckdldEV4dGVybmFsSXAocmVzcG9uc2UpIHtcblx0XHRpZiAocmVzcG9uc2UgPT09IGZhbHNlKSB7XG5cdFx0XHRuZXR3b3Jrcy4kZ2V0TXlJcEJ1dHRvbi5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnZXh0aXBhZGRyJywgcmVzcG9uc2UuaXApO1xuXHRcdFx0bmV0d29ya3MuJGV4dGlwYWRkci50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdG5ldHdvcmtzLiRnZXRNeUlwQnV0dG9uLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0fVxuXHR9LFxuXHR0b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKSB7XG5cdFx0JCgnI2V0aC1pbnRlcmZhY2VzLW1lbnUgYScpLmVhY2goKGluZGV4LCBvYmopID0+IHtcblx0XHRcdGNvbnN0IGV0aCA9ICQob2JqKS5hdHRyKCdkYXRhLXRhYicpO1xuXHRcdFx0aWYgKCQoYCNkaGNwLSR7ZXRofS1jaGVja2JveGApLmNoZWNrYm94KCdpcyB1bmNoZWNrZWQnKSkge1xuXHRcdFx0XHQkKGAjaXAtYWRkcmVzcy1ncm91cC0ke2V0aH1gKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0JChgI25vdC1kaGNwLSR7ZXRofWApLnZhbCgnMScpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JChgI2lwLWFkZHJlc3MtZ3JvdXAtJHtldGh9YCkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdCQoYCNub3QtZGhjcC0ke2V0aH1gKS52YWwoJycpO1xuXHRcdFx0fVxuXHRcdFx0bmV0d29ya3MuYWRkTmV3Rm9ybVJ1bGVzKGV0aCk7XG5cdFx0fSk7XG5cblx0XHRpZiAoJCgnI3VzZW5hdC1jaGVja2JveCcpLmNoZWNrYm94KCdpcyBjaGVja2VkJykpIHtcblx0XHRcdCQoJy5uYXRlZC1zZXR0aW5ncy1ncm91cCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcubmF0ZWQtc2V0dGluZ3MtZ3JvdXAnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHR9XG5cdH0sXG5cdGFkZE5ld0Zvcm1SdWxlcyhuZXdSb3dJZCkge1xuXHRcdGNvbnN0IG5hbWVDbGFzcyA9IGBuYW1lXyR7bmV3Um93SWR9YDtcblx0XHRuZXR3b3Jrcy52YWxpZGF0ZVJ1bGVzW25hbWVDbGFzc10gPSB7XG5cdFx0XHRpZGVudGlmaWVyOiBuYW1lQ2xhc3MsXG5cdFx0XHRkZXBlbmRzOiBgaW50ZXJmYWNlXyR7bmV3Um93SWR9YCxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZW1wdHknLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm53X1ZhbGlkYXRlTmFtZUlzTm90QmVFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cblx0XHR9O1xuXG5cdFx0Y29uc3QgdmxhbkNsYXNzID0gYHZsYW5pZF8ke25ld1Jvd0lkfWA7XG5cdFx0bmV0d29ya3MudmFsaWRhdGVSdWxlc1t2bGFuQ2xhc3NdID0ge1xuXHRcdFx0ZGVwZW5kczogYGludGVyZmFjZV8ke25ld1Jvd0lkfWAsXG5cdFx0XHRpZGVudGlmaWVyOiB2bGFuQ2xhc3MsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2ludGVnZXJbMC4uNDA5NV0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm53X1ZhbGlkYXRlVmxhblJhbmdlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogYGNoZWNrVmxhblske25ld1Jvd0lkfV1gLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm53X1ZhbGlkYXRlVmxhbkNyb3NzLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblxuXHRcdH07XG5cblx0XHRjb25zdCBpcGFkZHJDbGFzcyA9IGBpcGFkZHJfJHtuZXdSb3dJZH1gO1xuXHRcdG5ldHdvcmtzLnZhbGlkYXRlUnVsZXNbaXBhZGRyQ2xhc3NdID0ge1xuXHRcdFx0aWRlbnRpZmllcjogaXBhZGRyQ2xhc3MsXG5cdFx0XHRkZXBlbmRzOiBgbm90LWRoY3AtJHtuZXdSb3dJZH1gLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVJcHBhZGRySXNFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpcGFkZHInLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm53X1ZhbGlkYXRlSXBwYWRkck5vdFJpZ2h0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9O1xuXG5cdFx0Y29uc3QgZGhjcENsYXNzID0gYGRoY3BfJHtuZXdSb3dJZH1gO1xuXHRcdG5ldHdvcmtzLnZhbGlkYXRlUnVsZXNbZGhjcENsYXNzXSA9IHtcblx0XHRcdGlkZW50aWZpZXI6IGRoY3BDbGFzcyxcblx0XHRcdGRlcGVuZHM6IGBpbnRlcmZhY2VfJHtuZXdSb3dJZH1gLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6IGBkaGNwT25WbGFuTmV0d29ya3NbJHtuZXdSb3dJZH1dYCxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZURIQ1BPblZsYW5zRG9udFN1cHBvcnQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH07XG5cblx0fSxcblx0Y2JCZWZvcmVTZW5kRm9ybShzZXR0aW5ncykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHNldHRpbmdzO1xuXHRcdHJlc3VsdC5kYXRhID0gbmV0d29ya3MuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlcycpO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cdGNiQWZ0ZXJTZW5kRm9ybSgpIHtcblxuXHR9LFxuXHRpbml0aWFsaXplRm9ybSgpIHtcblx0XHRGb3JtLiRmb3JtT2JqID0gbmV0d29ya3MuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW5ldHdvcmsvc2F2ZWA7XG5cdFx0Rm9ybS52YWxpZGF0ZVJ1bGVzID0gbmV0d29ya3MudmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSBuZXR3b3Jrcy5jYkJlZm9yZVNlbmRGb3JtO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtID0gbmV0d29ya3MuY2JBZnRlclNlbmRGb3JtO1xuXHRcdEZvcm0uaW5pdGlhbGl6ZSgpO1xuXHR9LFxufTtcblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmlwYWRkciA9ICh2YWx1ZSkgPT4ge1xuXHRsZXQgcmVzdWx0ID0gdHJ1ZTtcblx0Y29uc3QgZiA9IHZhbHVlLm1hdGNoKC9eKFxcZHsxLDN9KVxcLihcXGR7MSwzfSlcXC4oXFxkezEsM30pXFwuKFxcZHsxLDN9KSQvKTtcblx0aWYgKGYgPT0gbnVsbCkge1xuXHRcdHJlc3VsdCA9IGZhbHNlO1xuXHR9IGVsc2Uge1xuXHRcdGZvciAobGV0IGkgPSAxOyBpIDwgNTsgaSArPSAxKSB7XG5cdFx0XHRjb25zdCBhID0gZltpXTtcblx0XHRcdGlmIChhID4gMjU1KSB7XG5cdFx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoZls1XSA+IDMyKSB7XG5cdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbiQuZm4uZm9ybS5zZXR0aW5ncy5ydWxlcy5pcGFkZHJXaXRoUG9ydE9wdGlvbmFsID0gKHZhbHVlKSA9PiB7XG5cdGxldCByZXN1bHQgPSB0cnVlO1xuXHRjb25zdCBmID0gdmFsdWUubWF0Y2goL14oXFxkezEsM30pXFwuKFxcZHsxLDN9KVxcLihcXGR7MSwzfSlcXC4oXFxkezEsM30pKDpbMC05XSspPyQvKTtcblx0aWYgKGYgPT0gbnVsbCkge1xuXHRcdHJlc3VsdCA9IGZhbHNlO1xuXHR9IGVsc2Uge1xuXHRcdGZvciAobGV0IGkgPSAxOyBpIDwgNTsgaSArPSAxKSB7XG5cdFx0XHRjb25zdCBhID0gZltpXTtcblx0XHRcdGlmIChhID4gMjU1KSB7XG5cdFx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoZls1XSA+IDMyKSB7XG5cdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbiQuZm4uZm9ybS5zZXR0aW5ncy5ydWxlcy5jaGVja1ZsYW4gPSAodmxhblZhbHVlLCBwYXJhbSkgPT4ge1xuXHRsZXQgcmVzdWx0ID0gdHJ1ZTtcblx0Y29uc3QgdmxhbnNBcnJheSA9IHt9O1xuXHRjb25zdCBhbGxWYWx1ZXMgPSBuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdGlmIChhbGxWYWx1ZXMuaW50ZXJmYWNlXzAgIT09IHVuZGVmaW5lZCAmJiBhbGxWYWx1ZXMuaW50ZXJmYWNlXzAgPiAwKSB7XG5cdFx0Y29uc3QgbmV3RXRoTmFtZSA9IGFsbFZhbHVlc1tgaW50ZXJmYWNlXyR7YWxsVmFsdWVzLmludGVyZmFjZV8wfWBdO1xuXHRcdHZsYW5zQXJyYXlbbmV3RXRoTmFtZV0gPSBbYWxsVmFsdWVzLnZsYW5pZF8wXTtcblx0XHRpZiAoYWxsVmFsdWVzLnZsYW5pZF8wID09PSAnJykge1xuXHRcdFx0cmVzdWx0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cdCQuZWFjaChhbGxWYWx1ZXMsIChpbmRleCwgdmFsdWUpID0+IHtcblx0XHRpZiAoaW5kZXggPT09ICdpbnRlcmZhY2VfMCcgfHwgaW5kZXggPT09ICd2bGFuaWRfMCcpIHJldHVybjtcblx0XHRpZiAoaW5kZXguaW5kZXhPZigndmxhbmlkJykgPj0gMCkge1xuXHRcdFx0Y29uc3QgZXRoTmFtZSA9IGFsbFZhbHVlc1tgaW50ZXJmYWNlXyR7aW5kZXguc3BsaXQoJ18nKVsxXX1gXTtcblx0XHRcdGlmICgkLmluQXJyYXkodmFsdWUsIHZsYW5zQXJyYXlbZXRoTmFtZV0pID49IDBcblx0XHRcdFx0JiYgdmxhblZhbHVlID09PSB2YWx1ZVxuXHRcdFx0XHQmJiBwYXJhbSA9PT0gaW5kZXguc3BsaXQoJ18nKVsxXSkge1xuXHRcdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICghKGV0aE5hbWUgaW4gdmxhbnNBcnJheSkpIHtcblx0XHRcdFx0XHR2bGFuc0FycmF5W2V0aE5hbWVdID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0dmxhbnNBcnJheVtldGhOYW1lXS5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmRoY3BPblZsYW5OZXR3b3JrcyA9ICh2YWx1ZSwgcGFyYW0pID0+IHtcblx0bGV0IHJlc3VsdCA9IHRydWU7XG5cdGNvbnN0IHZsYW5WYWx1ZSA9IG5ldHdvcmtzLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsIGB2bGFuaWRfJHtwYXJhbX1gKTtcblx0Y29uc3QgZGhjcFZhbHVlID0gbmV0d29ya3MuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgYGRoY3BfJHtwYXJhbX1gKTtcblx0aWYgKHZsYW5WYWx1ZSA+IDAgJiYgZGhjcFZhbHVlID09PSAnb24nKSB7XG5cdFx0cmVzdWx0ID0gZmFsc2U7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbiQuZm4uZm9ybS5zZXR0aW5ncy5ydWxlcy5leHRlbmFsSXBIb3N0ID0gKCkgPT4ge1xuXHRjb25zdCBhbGxWYWx1ZXMgPSBuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdGlmIChhbGxWYWx1ZXMudXNlbmF0ID09PSAnb24nKSB7XG5cdFx0aWYgKGFsbFZhbHVlcy5leHRob3N0bmFtZSA9PT0gJycgJiYgYWxsVmFsdWVzLmV4dGlwYWRkciA9PT0gJycpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHRydWU7XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cdG5ldHdvcmtzLmluaXRpYWxpemUoKTtcbn0pO1xuIl19