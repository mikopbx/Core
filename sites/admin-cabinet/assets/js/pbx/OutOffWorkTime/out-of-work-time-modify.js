"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl,globalTranslate, Extensions, Form, SemanticLocalization, SoundFilesSelector */
$.fn.form.settings.rules.customNotEmptyIfActionRule = function (value, action) {
  if (value.length === 0 && $('#action').val() === action) {
    return false;
  }

  return true;
};

var outOfWorkTimeRecord = {
  $formObj: $('#save-outoffwork-form'),
  $defaultDropdown: $('#save-outoffwork-form .dropdown-default'),
  $rangeDaysStart: $('#range-days-start'),
  $rangeDaysEnd: $('#range-days-end'),
  $rangeTimeStart: $('#range-time-start'),
  $rangeTimeEnd: $('#range-time-end'),
  $date_from: $('#date_from'),
  $date_to: $('#date_to'),
  $time_to: $('#time_to'),
  $forwardingSelectDropdown: $('#save-outoffwork-form .forwarding-select'),
  validateRules: {
    audio_message_id: {
      identifier: 'audio_message_id',
      rules: [{
        type: 'customNotEmptyIfActionRule[playmessage]',
        prompt: globalTranslate.tf_ValidateAudioMessageEmpty
      }]
    },
    extension: {
      identifier: 'extension',
      rules: [{
        type: 'customNotEmptyIfActionRule[extension]',
        prompt: globalTranslate.tf_ValidateExtensionEmpty
      }]
    },
    timefrom: {
      optional: true,
      identifier: 'time_from',
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    },
    timeto: {
      identifier: 'time_to',
      optional: true,
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    }
  },
  initialize: function initialize() {
    $('#out-time-modify-menu .item').tab();
    outOfWorkTimeRecord.$defaultDropdown.dropdown();
    outOfWorkTimeRecord.$rangeDaysStart.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      endCalendar: outOfWorkTimeRecord.$rangeDaysEnd,
      type: 'date',
      inline: false,
      monthFirst: false,
      regExp: SemanticLocalization.regExp
    });
    outOfWorkTimeRecord.$rangeDaysEnd.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      startCalendar: outOfWorkTimeRecord.$rangeDaysStart,
      type: 'date',
      inline: false,
      monthFirst: false,
      regExp: SemanticLocalization.regExp,
      onChange: function onChange(newDateTo) {
        var oldDateTo = outOfWorkTimeRecord.$date_to.attr('value');

        if (newDateTo !== null && oldDateTo !== '') {
          oldDateTo = new Date(oldDateTo * 1000);

          if (newDateTo - oldDateTo !== 0) {
            outOfWorkTimeRecord.$date_from.trigger('change');
          }
        }
      }
    });
    outOfWorkTimeRecord.$rangeTimeStart.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      endCalendar: outOfWorkTimeRecord.$rangeTimeEnd,
      type: 'time',
      inline: false,
      disableMinute: true,
      ampm: false
    });
    outOfWorkTimeRecord.$rangeTimeEnd.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      type: 'time',
      inline: false,
      disableMinute: true,
      ampm: false,
      onChange: function onChange(newTimeTo) {
        var oldTimeTo = outOfWorkTimeRecord.$time_to.attr('value');

        if (newTimeTo !== null && oldTimeTo !== '') {
          oldTimeTo = new Date(oldTimeTo * 1000);

          if (newTimeTo - oldTimeTo !== 0) {
            outOfWorkTimeRecord.$time_to.trigger('change');
          }
        }
      }
    });
    $('#action').dropdown({
      onChange: function onChange() {
        outOfWorkTimeRecord.toggleDisabledFieldClass();
      }
    });
    $('#weekday_from').dropdown({
      onChange: function onChange() {
        var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
        var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

        if (from < to || to === -1 || from === -1) {
          outOfWorkTimeRecord.$formObj.form('set value', 'weekday_to', from);
        }
      }
    });
    $('#weekday_to').dropdown({
      onChange: function onChange() {
        var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
        var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

        if (to < from || from === -1) {
          outOfWorkTimeRecord.$formObj.form('set value', 'weekday_from', to);
        }
      }
    });
    $('#erase-dates').on('click', function (e) {
      outOfWorkTimeRecord.$rangeDaysStart.calendar('clear');
      outOfWorkTimeRecord.$rangeDaysEnd.calendar('clear');
      outOfWorkTimeRecord.$formObj.form('set values', {
        date_from: '',
        date_to: ''
      });
      e.preventDefault();
    });
    $('#erase-weekdays').on('click', function (e) {
      outOfWorkTimeRecord.$formObj.form('set values', {
        weekday_from: -1,
        weekday_to: -1
      });
      outOfWorkTimeRecord.$rangeDaysStart.trigger('change');
      e.preventDefault();
    });
    $('#erase-timeperiod').on('click', function (e) {
      outOfWorkTimeRecord.$rangeTimeStart.calendar('clear');
      outOfWorkTimeRecord.$rangeTimeEnd.calendar('clear');
      outOfWorkTimeRecord.$time_to.trigger('change');
      e.preventDefault();
    });
    $('#save-outoffwork-form .audio-message-select').dropdown(SoundFilesSelector.getDropdownSettingsWithEmpty());
    outOfWorkTimeRecord.initializeForm();
    outOfWorkTimeRecord.$forwardingSelectDropdown.dropdown(Extensions.getDropdownSettingsWithoutEmpty());
    outOfWorkTimeRecord.toggleDisabledFieldClass();
    outOfWorkTimeRecord.changeDateFormat();
    $('#inbound-rules-table .ui.checkbox').checkbox({
      onChange: function onChange() {
        if ($(this).parent().checkbox('is checked')) {
          $('#inbound-rules-table .ui.checkbox[data-did=' + $(this).parent().attr('data-did') + ']').checkbox('set checked');
        } else {
          $('#inbound-rules-table .ui.checkbox[data-did=' + $(this).parent().attr('data-did') + ']').checkbox('set unchecked');
        }
      }
    });
    $('#allowRestriction').parent().checkbox({
      onChange: outOfWorkTimeRecord.changeRestriction
    });
    outOfWorkTimeRecord.changeRestriction();
  },
  changeRestriction: function changeRestriction() {
    if ($('#allowRestriction').parent().checkbox('is checked')) {
      $("a[data-tab='rules']").show();
    } else {
      $("a[data-tab='rules']").hide();
    }
  },

  /**
   * Меняет представление даты начала и даты окончания из linuxtime в локальное представление
   */
  changeDateFormat: function changeDateFormat() {
    var dateFrom = outOfWorkTimeRecord.$date_from.attr('value');
    var dateTo = outOfWorkTimeRecord.$date_to.attr('value');

    if (dateFrom !== undefined && dateFrom.length > 0) {
      outOfWorkTimeRecord.$rangeDaysStart.calendar('set date', new Date(dateFrom * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_from', dateFrom);
    }

    if (dateTo !== undefined && dateTo.length > 0) {
      outOfWorkTimeRecord.$rangeDaysEnd.calendar('set date', new Date(dateTo * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_to', dateTo);
    }
  },
  toggleDisabledFieldClass: function toggleDisabledFieldClass() {
    if (outOfWorkTimeRecord.$formObj.form('get value', 'action') === 'extension') {
      $('#extension-group').show();
      $('#audio-file-group').hide();
      $('#audio_message_id').dropdown('clear');
    } else {
      $('#extension-group').hide();
      $('#audio-file-group').show();
      outOfWorkTimeRecord.$formObj.form('set value', 'extension', -1);
    }
  },

  /**
   * Кастомная проверка полей формы, которые не получается сделать через валидацию
   * @param result
   * @returns {*}
   */
  customValidateForm: function customValidateForm(result) {
    // Проверим поля даты
    if (result.data.date_from !== '' && result.data.date_to === '' || result.data.date_to !== '' && result.data.date_from === '') {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckDateInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим поля дней недели


    if (result.data.weekday_from > 0 && result.data.weekday_to === '-1' || result.data.weekday_to > 0 && result.data.weekday_from === '-1') {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckWeekDayInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим поля времени


    if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим поля времени на соблюдение формату


    if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим все поля


    if (result.data.time_from === '' && result.data.time_to === '' && result.data.weekday_from === '-1' && result.data.weekday_to === '-1' && result.data.date_from === '' && result.data.date_to === '') {
      $('.form .error.message').html(globalTranslate.tf_ValidateNoRulesSelected).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    }

    return result;
  },
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    $('.form .error.message').html('').hide();
    result.data = outOfWorkTimeRecord.$formObj.form('get values');
    var dateFrom = outOfWorkTimeRecord.$rangeDaysStart.calendar('get date');

    if (dateFrom !== null) {
      dateFrom.setHours(0, 0, 0, 0);
      result.data.date_from = Math.round(dateFrom.getTime() / 1000);
    }

    var dateTo = outOfWorkTimeRecord.$rangeDaysEnd.calendar('get date');

    if (dateTo !== null) {
      dateTo.setHours(23, 59, 59, 0);
      result.data.date_to = Math.round(dateTo.getTime() / 1000);
    }

    return outOfWorkTimeRecord.customValidateForm(result);
  },
  cbAfterSendForm: function cbAfterSendForm() {},
  initializeForm: function initializeForm() {
    Form.$formObj = outOfWorkTimeRecord.$formObj;
    Form.url = "".concat(globalRootUrl, "out-off-work-time/save");
    Form.validateRules = outOfWorkTimeRecord.validateRules;
    Form.cbBeforeSendForm = outOfWorkTimeRecord.cbBeforeSendForm;
    Form.cbAfterSendForm = outOfWorkTimeRecord.cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  outOfWorkTimeRecord.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9PdXRPZmZXb3JrVGltZS9vdXQtb2Ytd29yay10aW1lLW1vZGlmeS5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJmb3JtIiwic2V0dGluZ3MiLCJydWxlcyIsImN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlIiwidmFsdWUiLCJhY3Rpb24iLCJsZW5ndGgiLCJ2YWwiLCJvdXRPZldvcmtUaW1lUmVjb3JkIiwiJGZvcm1PYmoiLCIkZGVmYXVsdERyb3Bkb3duIiwiJHJhbmdlRGF5c1N0YXJ0IiwiJHJhbmdlRGF5c0VuZCIsIiRyYW5nZVRpbWVTdGFydCIsIiRyYW5nZVRpbWVFbmQiLCIkZGF0ZV9mcm9tIiwiJGRhdGVfdG8iLCIkdGltZV90byIsIiRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd24iLCJ2YWxpZGF0ZVJ1bGVzIiwiYXVkaW9fbWVzc2FnZV9pZCIsImlkZW50aWZpZXIiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwidGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSIsImV4dGVuc2lvbiIsInRmX1ZhbGlkYXRlRXh0ZW5zaW9uRW1wdHkiLCJ0aW1lZnJvbSIsIm9wdGlvbmFsIiwidGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCIsInRpbWV0byIsImluaXRpYWxpemUiLCJ0YWIiLCJkcm9wZG93biIsImNhbGVuZGFyIiwiZmlyc3REYXlPZldlZWsiLCJTZW1hbnRpY0xvY2FsaXphdGlvbiIsImNhbGVuZGFyRmlyc3REYXlPZldlZWsiLCJ0ZXh0IiwiY2FsZW5kYXJUZXh0IiwiZW5kQ2FsZW5kYXIiLCJpbmxpbmUiLCJtb250aEZpcnN0IiwicmVnRXhwIiwic3RhcnRDYWxlbmRhciIsIm9uQ2hhbmdlIiwibmV3RGF0ZVRvIiwib2xkRGF0ZVRvIiwiYXR0ciIsIkRhdGUiLCJ0cmlnZ2VyIiwiZGlzYWJsZU1pbnV0ZSIsImFtcG0iLCJuZXdUaW1lVG8iLCJvbGRUaW1lVG8iLCJ0b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MiLCJmcm9tIiwidG8iLCJvbiIsImUiLCJkYXRlX2Zyb20iLCJkYXRlX3RvIiwicHJldmVudERlZmF1bHQiLCJ3ZWVrZGF5X2Zyb20iLCJ3ZWVrZGF5X3RvIiwiU291bmRGaWxlc1NlbGVjdG9yIiwiZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhFbXB0eSIsImluaXRpYWxpemVGb3JtIiwiRXh0ZW5zaW9ucyIsImdldERyb3Bkb3duU2V0dGluZ3NXaXRob3V0RW1wdHkiLCJjaGFuZ2VEYXRlRm9ybWF0IiwiY2hlY2tib3giLCJwYXJlbnQiLCJjaGFuZ2VSZXN0cmljdGlvbiIsInNob3ciLCJoaWRlIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJ1bmRlZmluZWQiLCJjdXN0b21WYWxpZGF0ZUZvcm0iLCJyZXN1bHQiLCJkYXRhIiwiaHRtbCIsInRmX1ZhbGlkYXRlQ2hlY2tEYXRlSW50ZXJ2YWwiLCJGb3JtIiwiJHN1Ym1pdEJ1dHRvbiIsInRyYW5zaXRpb24iLCJyZW1vdmVDbGFzcyIsInRmX1ZhbGlkYXRlQ2hlY2tXZWVrRGF5SW50ZXJ2YWwiLCJ0aW1lX2Zyb20iLCJ0aW1lX3RvIiwidGZfVmFsaWRhdGVOb1J1bGVzU2VsZWN0ZWQiLCJjYkJlZm9yZVNlbmRGb3JtIiwic2V0SG91cnMiLCJNYXRoIiwicm91bmQiLCJnZXRUaW1lIiwiY2JBZnRlclNlbmRGb3JtIiwidXJsIiwiZ2xvYmFsUm9vdFVybCIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUdBQSxDQUFDLENBQUNDLEVBQUYsQ0FBS0MsSUFBTCxDQUFVQyxRQUFWLENBQW1CQyxLQUFuQixDQUF5QkMsMEJBQXpCLEdBQXNELFVBQUNDLEtBQUQsRUFBUUMsTUFBUixFQUFtQjtBQUN4RSxNQUFJRCxLQUFLLENBQUNFLE1BQU4sS0FBaUIsQ0FBakIsSUFBc0JSLENBQUMs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QixFQUFBQSxjQTFSMkIsNEJBMFJWO0FBQ2hCaUIsSUFBQUEsSUFBSSxDQUFDNUUsUUFBTCxHQUFnQkQsbUJBQW1CLENBQUNDLFFBQXBDO0FBQ0E0RSxJQUFBQSxJQUFJLENBQUNjLEdBQUwsYUFBY0MsYUFBZDtBQUNBZixJQUFBQSxJQUFJLENBQUNsRSxhQUFMLEdBQXFCWCxtQkFBbUIsQ0FBQ1csYUFBekM7QUFDQWtFLElBQUFBLElBQUksQ0FBQ1EsZ0JBQUwsR0FBd0JyRixtQkFBbUIsQ0FBQ3FGLGdCQUE1QztBQUNBUixJQUFBQSxJQUFJLENBQUNhLGVBQUwsR0FBdUIxRixtQkFBbUIsQ0FBQzBGLGVBQTNDO0FBQ0FiLElBQUFBLElBQUksQ0FBQ3JELFVBQUw7QUFDQTtBQWpTMEIsQ0FBNUI7QUFvU0FsQyxDQUFDLENBQUN1RyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFNO0FBQ3ZCOUYsRUFBQUEsbUJBQW1CLENBQUN3QixVQUFwQjtBQUNBLENBRkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTWlrb1BCWCAtIGZyZWUgcGhvbmUgc3lzdGVtIGZvciBzbWFsbCBidXNpbmVzc1xuICogQ29weXJpZ2h0IChDKSAyMDE3LTIwMjAgQWxleGV5IFBvcnRub3YgYW5kIE5pa29sYXkgQmVrZXRvdlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS5cbiAqIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuLyogZ2xvYmFsIGdsb2JhbFJvb3RVcmwsZ2xvYmFsVHJhbnNsYXRlLCBFeHRlbnNpb25zLCBGb3JtLCBTZW1hbnRpY0xvY2FsaXphdGlvbiwgU291bmRGaWxlc1NlbGVjdG9yICovXG5cblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlID0gKHZhbHVlLCBhY3Rpb24pID0+IHtcblx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMCAmJiAkKCcjYWN0aW9uJykudmFsKCkgPT09IGFjdGlvbikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IG91dE9mV29ya1RpbWVSZWNvcmQgPSB7XG5cdCRmb3JtT2JqOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0nKSxcblx0JGRlZmF1bHREcm9wZG93bjogJCgnI3NhdmUtb3V0b2Zmd29yay1mb3JtIC5kcm9wZG93bi1kZWZhdWx0JyksXG5cdCRyYW5nZURheXNTdGFydDogJCgnI3JhbmdlLWRheXMtc3RhcnQnKSxcblx0JHJhbmdlRGF5c0VuZDogJCgnI3JhbmdlLWRheXMtZW5kJyksXG5cdCRyYW5nZVRpbWVTdGFydDogJCgnI3JhbmdlLXRpbWUtc3RhcnQnKSxcblx0JHJhbmdlVGltZUVuZDogJCgnI3JhbmdlLXRpbWUtZW5kJyksXG5cdCRkYXRlX2Zyb206ICQoJyNkYXRlX2Zyb20nKSxcblx0JGRhdGVfdG86ICQoJyNkYXRlX3RvJyksXG5cdCR0aW1lX3RvOiAkKCcjdGltZV90bycpLFxuXHQkZm9yd2FyZGluZ1NlbGVjdERyb3Bkb3duOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0gLmZvcndhcmRpbmctc2VsZWN0JyksXG5cdHZhbGlkYXRlUnVsZXM6IHtcblx0XHRhdWRpb19tZXNzYWdlX2lkOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnYXVkaW9fbWVzc2FnZV9pZCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2N1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlW3BsYXltZXNzYWdlXScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRleHRlbnNpb246IHtcblx0XHRcdGlkZW50aWZpZXI6ICdleHRlbnNpb24nLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdjdXN0b21Ob3RFbXB0eUlmQWN0aW9uUnVsZVtleHRlbnNpb25dJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUV4dGVuc2lvbkVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdHRpbWVmcm9tOiB7XG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdGlkZW50aWZpZXI6ICd0aW1lX2Zyb20nLFxuXHRcdFx0cnVsZXM6IFt7XG5cdFx0XHRcdHR5cGU6ICdyZWdFeHAnLFxuXHRcdFx0XHR2YWx1ZTogL14oMlswLTNdfDE/WzAtOV0pOihbMC01XT9bMC05XSkkLyxcblx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCxcblx0XHRcdH1dLFxuXHRcdH0sXG5cdFx0dGltZXRvOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAndGltZV90bycsXG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdHJ1bGVzOiBbe1xuXHRcdFx0XHR0eXBlOiAncmVnRXhwJyxcblx0XHRcdFx0dmFsdWU6IC9eKDJbMC0zXXwxP1swLTldKTooWzAtNV0/WzAtOV0pJC8sXG5cdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tUaW1lSW50ZXJ2YWwsXG5cdFx0XHR9XSxcblx0XHR9LFxuXHR9LFxuXHRpbml0aWFsaXplKCkge1xuXHRcdCQoJyNvdXQtdGltZS1tb2RpZnktbWVudSAuaXRlbScpLnRhYigpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGRlZmF1bHREcm9wZG93bi5kcm9wZG93bigpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LmNhbGVuZGFyKHtcblx0XHRcdGZpcnN0RGF5T2ZXZWVrOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhckZpcnN0RGF5T2ZXZWVrLFxuXHRcdFx0dGV4dDogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJUZXh0LFxuXHRcdFx0ZW5kQ2FsZW5kYXI6IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZCxcblx0XHRcdHR5cGU6ICdkYXRlJyxcblx0XHRcdGlubGluZTogZmFsc2UsXG5cdFx0XHRtb250aEZpcnN0OiBmYWxzZSxcblx0XHRcdHJlZ0V4cDogU2VtYW50aWNMb2NhbGl6YXRpb24ucmVnRXhwLFxuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdHN0YXJ0Q2FsZW5kYXI6IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LFxuXHRcdFx0dHlwZTogJ2RhdGUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdG1vbnRoRmlyc3Q6IGZhbHNlLFxuXHRcdFx0cmVnRXhwOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5yZWdFeHAsXG5cdFx0XHRvbkNoYW5nZTogKG5ld0RhdGVUbykgPT4ge1xuXHRcdFx0XHRsZXQgb2xkRGF0ZVRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZGF0ZV90by5hdHRyKCd2YWx1ZScpO1xuXHRcdFx0XHRpZiAobmV3RGF0ZVRvICE9PSBudWxsICYmIG9sZERhdGVUbyAhPT0gJycpIHtcblx0XHRcdFx0XHRvbGREYXRlVG8gPSBuZXcgRGF0ZShvbGREYXRlVG8gKiAxMDAwKTtcblx0XHRcdFx0XHRpZiAoKG5ld0RhdGVUbyAtIG9sZERhdGVUbykgIT09IDApIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfZnJvbS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lU3RhcnQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHRlbmRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lRW5kLFxuXHRcdFx0dHlwZTogJ3RpbWUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdGRpc2FibGVNaW51dGU6IHRydWUsXG5cdFx0XHRhbXBtOiBmYWxzZSxcblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVFbmQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHR0eXBlOiAndGltZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0ZGlzYWJsZU1pbnV0ZTogdHJ1ZSxcblx0XHRcdGFtcG06IGZhbHNlLFxuXHRcdFx0b25DaGFuZ2U6IChuZXdUaW1lVG8pID0+IHtcblx0XHRcdFx0bGV0IG9sZFRpbWVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJHRpbWVfdG8uYXR0cigndmFsdWUnKTtcblx0XHRcdFx0aWYgKG5ld1RpbWVUbyAhPT0gbnVsbCAmJiBvbGRUaW1lVG8gIT09ICcnKSB7XG5cdFx0XHRcdFx0b2xkVGltZVRvID0gbmV3IERhdGUob2xkVGltZVRvICogMTAwMCk7XG5cdFx0XHRcdFx0aWYgKChuZXdUaW1lVG8gLSBvbGRUaW1lVG8pICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiR0aW1lX3RvLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHQkKCcjYWN0aW9uJylcblx0XHRcdC5kcm9wZG93bih7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQudG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XHQkKCcjd2Vla2RheV9mcm9tJylcblx0XHRcdC5kcm9wZG93bih7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdGNvbnN0IGZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICd3ZWVrZGF5X2Zyb20nKTtcblx0XHRcdFx0XHRjb25zdCB0byA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfdG8nKTtcblx0XHRcdFx0XHRpZiAoZnJvbSA8IHRvIHx8IHRvID09PSAtMSB8fCBmcm9tID09PSAtMSkge1xuXHRcdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnd2Vla2RheV90bycsIGZyb20pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdCQoJyN3ZWVrZGF5X3RvJylcblx0XHRcdC5kcm9wZG93bih7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdGNvbnN0IGZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICd3ZWVrZGF5X2Zyb20nKTtcblx0XHRcdFx0XHRjb25zdCB0byA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfdG8nKTtcblx0XHRcdFx0XHRpZiAodG8gPCBmcm9tIHx8IGZyb20gPT09IC0xKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICd3ZWVrZGF5X2Zyb20nLCB0byk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cblx0XHQkKCcjZXJhc2UtZGF0ZXMnKS5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ2NsZWFyJyk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNFbmQuY2FsZW5kYXIoJ2NsZWFyJyk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqXG5cdFx0XHRcdC5mb3JtKCdzZXQgdmFsdWVzJywge1xuXHRcdFx0XHRcdGRhdGVfZnJvbTogJycsXG5cdFx0XHRcdFx0ZGF0ZV90bzogJycsXG5cdFx0XHRcdH0pO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXG5cdFx0JCgnI2VyYXNlLXdlZWtkYXlzJykub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmpcblx0XHRcdFx0LmZvcm0oJ3NldCB2YWx1ZXMnLCB7XG5cdFx0XHRcdFx0d2Vla2RheV9mcm9tOiAtMSxcblx0XHRcdFx0XHR3ZWVrZGF5X3RvOiAtMSxcblx0XHRcdFx0fSk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblx0XHQkKCcjZXJhc2UtdGltZXBlcmlvZCcpLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVTdGFydC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZUVuZC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHRpbWVfdG8udHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cblx0XHQkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0gLmF1ZGlvLW1lc3NhZ2Utc2VsZWN0JykuZHJvcGRvd24oU291bmRGaWxlc1NlbGVjdG9yLmdldERyb3Bkb3duU2V0dGluZ3NXaXRoRW1wdHkoKSk7XG5cblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLmluaXRpYWxpemVGb3JtKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9yd2FyZGluZ1NlbGVjdERyb3Bkb3duLmRyb3Bkb3duKEV4dGVuc2lvbnMuZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhvdXRFbXB0eSgpKTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLnRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuY2hhbmdlRGF0ZUZvcm1hdCgpO1xuXG5cdFx0JCgnI2luYm91bmQtcnVsZXMtdGFibGUgLnVpLmNoZWNrYm94JykuY2hlY2tib3goe1xuXHRcdFx0b25DaGFuZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZigkKHRoaXMpLnBhcmVudCgpLmNoZWNrYm94KCdpcyBjaGVja2VkJykpe1xuXHRcdFx0XHRcdCQoJyNpbmJvdW5kLXJ1bGVzLXRhYmxlIC51aS5jaGVja2JveFtkYXRhLWRpZD0nKyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1kaWQnKSsnXScpLmNoZWNrYm94KCdzZXQgY2hlY2tlZCcpXG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdCQoJyNpbmJvdW5kLXJ1bGVzLXRhYmxlIC51aS5jaGVja2JveFtkYXRhLWRpZD0nKyQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1kaWQnKSsnXScpLmNoZWNrYm94KCdzZXQgdW5jaGVja2VkJylcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCQoJyNhbGxvd1Jlc3RyaWN0aW9uJykucGFyZW50KCkuY2hlY2tib3goe1xuXHRcdFx0b25DaGFuZ2U6IG91dE9mV29ya1RpbWVSZWNvcmQuY2hhbmdlUmVzdHJpY3Rpb25cblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLmNoYW5nZVJlc3RyaWN0aW9uKCk7XG5cdH0sXG5cdGNoYW5nZVJlc3RyaWN0aW9uKCl7XG5cdFx0aWYoJCgnI2FsbG93UmVzdHJpY3Rpb24nKS5wYXJlbnQoKS5jaGVja2JveCgnaXMgY2hlY2tlZCcpKXtcblx0XHRcdCQoXCJhW2RhdGEtdGFiPSdydWxlcyddXCIpLnNob3coKTtcblx0XHR9ZWxzZXtcblx0XHRcdCQoXCJhW2RhdGEtdGFiPSdydWxlcyddXCIpLmhpZGUoKTtcblx0XHR9XG5cdH0sXG5cdC8qKlxuXHQgKiDQnNC10L3Rj9C10YIg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0LTQsNGC0Ysg0L3QsNGH0LDQu9CwINC4INC00LDRgtGLINC+0LrQvtC90YfQsNC90LjRjyDQuNC3IGxpbnV4dGltZSDQsiDQu9C+0LrQsNC70YzQvdC+0LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LVcblx0ICovXG5cdGNoYW5nZURhdGVGb3JtYXQoKSB7XG5cdFx0Y29uc3QgZGF0ZUZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX2Zyb20uYXR0cigndmFsdWUnKTtcblx0XHRjb25zdCBkYXRlVG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX3RvLmF0dHIoJ3ZhbHVlJyk7XG5cdFx0aWYgKGRhdGVGcm9tICE9PSB1bmRlZmluZWQgJiYgZGF0ZUZyb20ubGVuZ3RoID4gMCkge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ3NldCBkYXRlJywgbmV3IERhdGUoZGF0ZUZyb20gKiAxMDAwKSk7XG5cdFx0XHQvLyBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICdkYXRlX2Zyb20nLCBkYXRlRnJvbSk7XG5cdFx0fVxuXHRcdGlmIChkYXRlVG8gIT09IHVuZGVmaW5lZCAmJiBkYXRlVG8ubGVuZ3RoID4gMCkge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKCdzZXQgZGF0ZScsIG5ldyBEYXRlKGRhdGVUbyAqIDEwMDApKTtcblx0XHRcdC8vIG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2RhdGVfdG8nLCBkYXRlVG8pO1xuXHRcdH1cblx0fSxcblx0dG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCkge1xuXHRcdGlmIChvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICdhY3Rpb24nKSA9PT0gJ2V4dGVuc2lvbicpIHtcblx0XHRcdCQoJyNleHRlbnNpb24tZ3JvdXAnKS5zaG93KCk7XG5cdFx0XHQkKCcjYXVkaW8tZmlsZS1ncm91cCcpLmhpZGUoKTtcblx0XHRcdCQoJyNhdWRpb19tZXNzYWdlX2lkJykuZHJvcGRvd24oJ2NsZWFyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNleHRlbnNpb24tZ3JvdXAnKS5oaWRlKCk7XG5cdFx0XHQkKCcjYXVkaW8tZmlsZS1ncm91cCcpLnNob3coKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2V4dGVuc2lvbicsIC0xKTtcblx0XHR9XG5cdH0sXG5cdC8qKlxuXHQgKiDQmtCw0YHRgtC+0LzQvdCw0Y8g0L/RgNC+0LLQtdGA0LrQsCDQv9C+0LvQtdC5INGE0L7RgNC80YssINC60L7RgtC+0YDRi9C1INC90LUg0L/QvtC70YPRh9Cw0LXRgtGB0Y8g0YHQtNC10LvQsNGC0Ywg0YfQtdGA0LXQtyDQstCw0LvQuNC00LDRhtC40Y5cblx0ICogQHBhcmFtIHJlc3VsdFxuXHQgKiBAcmV0dXJucyB7Kn1cblx0ICovXG5cdGN1c3RvbVZhbGlkYXRlRm9ybShyZXN1bHQpIHtcblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINC00LDRgtGLXG5cdFx0aWYgKChyZXN1bHQuZGF0YS5kYXRlX2Zyb20gIT09ICcnICYmIHJlc3VsdC5kYXRhLmRhdGVfdG8gPT09ICcnKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLmRhdGVfdG8gIT09ICcnICYmIHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9PT0gJycpKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tEYXRlSW50ZXJ2YWwpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0L/QvtC70Y8g0LTQvdC10Lkg0L3QtdC00LXQu9C4XG5cdFx0aWYgKChyZXN1bHQuZGF0YS53ZWVrZGF5X2Zyb20gPiAwICYmIHJlc3VsdC5kYXRhLndlZWtkYXlfdG8gPT09ICctMScpXG5cdFx0XHR8fCAocmVzdWx0LmRhdGEud2Vla2RheV90byA+IDAgJiYgcmVzdWx0LmRhdGEud2Vla2RheV9mcm9tID09PSAnLTEnKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrV2Vla0RheUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINCy0YDQtdC80LXQvdC4XG5cdFx0aWYgKChyZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA9PT0gMClcblx0XHRcdHx8IChyZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA+IDAgJiYgcmVzdWx0LmRhdGEudGltZV9mcm9tLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINCy0YDQtdC80LXQvdC4INC90LAg0YHQvtCx0LvRjtC00LXQvdC40LUg0YTQvtGA0LzQsNGC0YNcblx0XHRpZiAoKHJlc3VsdC5kYXRhLnRpbWVfZnJvbS5sZW5ndGggPiAwICYmIHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID09PSAwKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrVGltZUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQstGB0LUg0L/QvtC70Y9cblx0XHRpZiAocmVzdWx0LmRhdGEudGltZV9mcm9tID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEudGltZV90byA9PT0gJydcblx0XHRcdCYmIHJlc3VsdC5kYXRhLndlZWtkYXlfZnJvbSA9PT0gJy0xJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEud2Vla2RheV90byA9PT0gJy0xJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEuZGF0ZV9mcm9tID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEuZGF0ZV90byA9PT0gJycpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVOb1J1bGVzU2VsZWN0ZWQpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoJycpLmhpZGUoKTtcblx0XHRyZXN1bHQuZGF0YSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlcycpO1xuXHRcdGNvbnN0IGRhdGVGcm9tID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ2dldCBkYXRlJyk7XG5cdFx0aWYgKGRhdGVGcm9tICE9PSBudWxsKSB7XG5cdFx0XHRkYXRlRnJvbS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblx0XHRcdHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9IE1hdGgucm91bmQoZGF0ZUZyb20uZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0fVxuXHRcdGNvbnN0IGRhdGVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcignZ2V0IGRhdGUnKTtcblx0XHRpZiAoZGF0ZVRvICE9PSBudWxsKSB7XG5cdFx0XHRkYXRlVG8uc2V0SG91cnMoMjMsIDU5LCA1OSwgMCk7XG5cdFx0XHRyZXN1bHQuZGF0YS5kYXRlX3RvID0gTWF0aC5yb3VuZChkYXRlVG8uZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0fVxuXHRcdHJldHVybiBvdXRPZldvcmtUaW1lUmVjb3JkLmN1c3RvbVZhbGlkYXRlRm9ybShyZXN1bHQpO1xuXHR9LFxuXHRjYkFmdGVyU2VuZEZvcm0oKSB7XG5cblx0fSxcblx0aW5pdGlhbGl6ZUZvcm0oKSB7XG5cdFx0Rm9ybS4kZm9ybU9iaiA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW91dC1vZmYtd29yay10aW1lL3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IG91dE9mV29ya1RpbWVSZWNvcmQudmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSBvdXRPZldvcmtUaW1lUmVjb3JkLmNiQmVmb3JlU2VuZEZvcm07XG5cdFx0Rm9ybS5jYkFmdGVyU2VuZEZvcm0gPSBvdXRPZldvcmtUaW1lUmVjb3JkLmNiQWZ0ZXJTZW5kRm9ybTtcblx0XHRGb3JtLmluaXRpYWxpemUoKTtcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0b3V0T2ZXb3JrVGltZVJlY29yZC5pbml0aWFsaXplKCk7XG59KTtcbiJdfQ==