"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl,globalTranslate, Form, PasswordScore, PbxApi, UserMessage, SoundFilesSelector, $ */
var generalSettingsModify = {
  $dirrtyField: $('#dirrty'),
  $formObj: $('#general-settings-form'),
  $webAdminPassword: $('#WebAdminPassword'),
  $sshPassword: $('#SSHPassword'),
  validateRules: {
    pbxname: {
      identifier: 'PBXName',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.gs_ValidateEmptyPBXName
      }]
    },
    WebAdminPassword: {
      identifier: 'WebAdminPassword',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.gs_ValidateEmptyWebPassword
      }, {
        type: 'minLength[5]',
        prompt: globalTranslate.gs_ValidateWeakWebPassword
      }, {
        type: 'notRegExp',
        value: /[a-z]/,
        prompt: '<b>' + globalTranslate.gs_Passwords + '</b>: ' + globalTranslate.gs_PasswordNoLowSimvol
      }, {
        type: 'notRegExp',
        value: /\d/,
        prompt: '<b>' + globalTranslate.gs_Passwords + '</b>: ' + globalTranslate.gs_PasswordNoNumbers
      }, {
        type: 'notRegExp',
        value: /[A-Z]/,
        prompt: '<b>' + globalTranslate.gs_Passwords + '</b>: ' + globalTranslate.gs_PasswordNoUpperSimvol
      }]
    },
    WebAdminPasswordRepeat: {
      identifier: 'WebAdminPasswordRepeat',
      rules: [{
        type: 'match[WebAdminPassword]',
        prompt: globalTranslate.gs_ValidateWebPasswordsFieldDifferent
      }]
    },
    SSHPassword: {
      identifier: 'SSHPassword',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.gs_ValidateEmptySSHPassword
      }, {
        type: 'minLength[5]',
        prompt: globalTranslate.gs_ValidateWeakSSHPassword
      }, {
        type: 'notRegExp',
        value: /[a-z]/,
        prompt: '<b>' + globalTranslate.gs_SSHPassword + '</b>: ' + globalTranslate.gs_PasswordNoLowSimvol
      }, {
        type: 'notRegExp',
        value: /\d/,
        prompt: '<b>' + globalTranslate.gs_SSHPassword + '</b>: ' + globalTranslate.gs_PasswordNoNumbers
      }, {
        type: 'notRegExp',
        value: /[A-Z]/,
        prompt: '<b>' + globalTranslate.gs_SSHPassword + '</b>: ' + globalTranslate.gs_PasswordNoUpperSimvol
      }]
    },
    SSHPasswordRepeat: {
      identifier: 'SSHPasswordRepeat',
      rules: [{
        type: 'match[SSHPassword]',
        prompt: globalTranslate.gs_ValidateSSHPasswordsFieldDifferent
      }]
    },
    WEBPort: {
      identifier: 'WEBPort',
      rules: [{
        type: 'integer[1..65535]',
        prompt: globalTranslate.gs_ValidateWEBPortOutOfRange
      }, {
        type: 'different[WEBHTTPSPort]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToWEBPort
      }, {
        type: 'different[AJAMPortTLS]',
        prompt: globalTranslate.gs_ValidateWEBPortNotEqualToAjamPort
      }, {
        type: 'different[AJAMPort]',
        prompt: globalTranslate.gs_ValidateWEBPortNotEqualToAjamTLSPort
      }]
    },
    WEBHTTPSPort: {
      identifier: 'WEBHTTPSPort',
      rules: [{
        type: 'integer[1..65535]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortOutOfRange
      }, {
        type: 'different[WEBPort]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToWEBPort
      }, {
        type: 'different[AJAMPortTLS]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToAjamPort
      }, {
        type: 'different[AJAMPort]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToAjamTLSPort
      }]
    },
    AJAMPort: {
      identifier: 'AJAMPort',
      rules: [{
        type: 'integer[1..65535]',
        prompt: globalTranslate.gs_ValidateAJAMPortOutOfRange
      }, {
        type: 'different[AJAMPortTLS]',
        prompt: globalTranslate.gs_ValidateAJAMPortOutOfRange
      }]
    }
  },
  initialize: function initialize() {
    generalSettingsModify.$webAdminPassword.on('keyup', function () {
      PasswordScore.checkPassStrength({
        pass: generalSettingsModify.$webAdminPassword.val(),
        bar: $('.password-score'),
        section: $('.password-score-section')
      });
    });
    generalSettingsModify.$sshPassword.on('keyup', function () {
      PasswordScore.checkPassStrength({
        pass: generalSettingsModify.$sshPassword.val(),
        bar: $('.ssh-password-score'),
        section: $('.ssh-password-score-section')
      });
    });
    $('#general-settings-menu').find('.item').tab({
      history: true,
      historyType: 'hash'
    });
    $('#general-settings-form .checkbox').checkbox();
    $('#general-settings-form .dropdown').dropdown();
    $('#audio-codecs-table, #video-codecs-table').tableDnD({
      onDrop: function onDrop() {
        generalSettingsModify.$dirrtyField.val(Math.random());
        generalSettingsModify.$dirrtyField.trigger('change');
      },
      onDragClass: 'hoveringRow',
      dragHandle: '.dragHandle'
    });
    $('#general-settings-form .audio-message-select').dropdown(SoundFilesSelector.getDropdownSettingsWithEmpty());
    generalSettingsModify.initializeForm();
    $(window).on('GS-ActivateTab', function (event, nameTab) {
      $('#general-settings-menu').find('.item').tab('change tab', nameTab);
    });
  },
  checkDeleteAllConditions: function checkDeleteAllConditions() {
    var deleteAllInput = generalSettingsModify.$formObj.form('get value', 'deleteAllInput');

    if (deleteAllInput === globalTranslate.gs_EnterDeleteAllPhrase) {
      PbxApi.SystemRestoreDefaultSettings(generalSettingsModify.cbAfterRestoreDefaultSettings);
    }
  },
  cbAfterRestoreDefaultSettings: function cbAfterRestoreDefaultSettings(response) {
    if (response === true) {
      UserMessage.showInformation(globalTranslate.gs_AllSettingsDeleted);
    } else {
      UserMessage.showMultiString(response);
    }
  },
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = generalSettingsModify.$formObj.form('get values');
    var arrCodecs = [];
    $('#audio-codecs-table .codec-row, #video-codecs-table .codec-row').each(function (index, obj) {
      if ($(obj).attr('id')) {
        arrCodecs.push({
          codecId: $(obj).attr('id'),
          disabled: $(obj).find('.checkbox').checkbox('is unchecked'),
          priority: index
        });
      }
    });
    result.data.codecs = JSON.stringify(arrCodecs);
    return result;
  },
  cbAfterSendForm: function cbAfterSendForm(response) {
    if (!response.success) {
      Form.$submitButton.removeClass('disabled');
    } else {
      $('.password-validate').remove();
    }

    generalSettingsModify.checkDeleteAllConditions();
  },
  initializeForm: function initializeForm() {
    Form.$formObj = generalSettingsModify.$formObj;
    Form.url = "".concat(globalRootUrl, "general-settings/save");
    Form.validateRules = generalSettingsModify.validateRules;
    Form.cbBeforeSendForm = generalSettingsModify.cbBeforeSendForm;
    Form.cbAfterSendForm = generalSettingsModify.cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  generalSettingsModify.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9HZW5lcmFsU2V0dGluZ3MvZ2VuZXJhbC1zZXR0aW5ncy1tb2RpZnkuanMiXSwibmFtZXMiOlsiZ2VuZXJhbFNldHRpbmdzTW9kaWZ5IiwiJGRpcnJ0eUZpZWxkIiwiJCIsIiRmb3JtT2JqIiwiJHdlYkFkbWluUGFzc3dvcmQiLCIkc3NoUGFzc3dvcmQiLCJ2YWxpZGF0ZVJ1bGVzIiwicGJ4bmFtZSIsImlkZW50aWZpZXIiLCJydWxlcyIsInR5cGUiLCJwcm9tcHQiLCJnbG9iYWxUcmFuc2xhdGUiLCJnc19WYWxpZGF0ZUVtcHR5UEJYTmFtZSIsIldlYkFkbWluUGFzc3dvcmQiLCJnc19WYWxpZGF0ZUVtcHR5V2ViUGFzc3dvcmQiLCJnc19WYWxpZGF0ZVdlYWtXZWJQYXNzd29yZCIsInZhbHVlIiwiZ3NfUGFzc3dvcmRzIiwiZ3NfUGFzc3dvcmROb0xvd1NpbXZvbCIsImdzX1Bhc3N3b3JkTm9OdW1iZXJzIiwiZ3NfUGFzc3dvcmROb1VwcGVyU2ltdm9sIiwiV2ViQWRtaW5QYXNzd29yZFJlcGVhdCIsImdzX1ZhbGlkYXRlV2ViUGFzc3dvcmRzRmllbGREaWZmZXJlbnQiLCJTU0hQYXNzd29yZCIsImdzX1ZhbGlkYXRlRW1wdHlTU0hQYXNzd29yZCIsImdzX1ZhbGlkYXRlV2Vha1NTSFBhc3N3b3JkIiwiZ3NfU1NIUGFzc3dvcmQiLCJTU0hQYXNzd29yZFJlcGVhdCIsImdzX1ZhbGlkYXRlU1NIUGFzc3dvcmRzRmllbGREaWZmZXJlbnQiLCJXRUJQb3J0IiwiZ3NfVmFsaWRhdGVXRUJQb3J0T3V0T2ZSYW5nZSIsImdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb1dFQlBvcnQiLCJnc19WYWxpZGF0ZVdFQlBvcnROb3RFcXVhbFRvQWphbVBvcnQiLCJnc19WYWxpZGF0ZVdFQlBvcnROb3RFcXVhbFRvQWphbVRMU1BvcnQiLCJXRUJIVFRQU1BvcnQiLCJnc19WYWxpZGF0ZVdFQkhUVFBTUG9ydE91dE9mUmFuZ2UiLCJnc19WYWxpZGF0ZVdFQkhUVFBTUG9ydE5vdEVxdWFsVG9BamFtUG9ydCIsImdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb0FqYW1UTFNQb3J0IiwiQUpBTVBvcnQiLCJnc19WYWxpZGF0ZUFKQU1Qb3J0T3V0T2ZSYW5nZSIsImluaXRpYWxpemUiLCJvbiIsIlBhc3N3b3JkU2NvcmUiLCJjaGVja1Bhc3NTdHJlbmd0aCIsInBhc3MiLCJ2YWwiLCJiYXIiLCJzZWN0aW9uIiwiZmluZCIsInRhYiIsImhpc3RvcnkiLCJoaXN0b3J5VHlwZSIsImNoZWNrYm94IiwiZHJvcGRvd24iLCJ0YWJsZURuRCIsIm9uRHJvcCIsIk1hdGgiLCJyYW5kb20iLCJ0cmlnZ2VyIiwib25EcmFnQ2xhc3MiLCJkcmFnSGFuZGxlIiwiU291bmRGaWxlc1NlbGVjdG9yIiwiZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhFbXB0eSIsImluaXRpYWxpemVGb3JtIiwid2luZG93IiwiZXZlbnQiLCJuYW1lVGFiIiwiY2hlY2tEZWxldGVBbGxDb25kaXRpb25zIiwiZGVsZXRlQWxsSW5wdXQiLCJmb3JtIiwiZ3NfRW50ZXJEZWxldGVBbGxQaHJhc2UiLCJQYnhBcGkiLCJTeXN0ZW1SZXN0b3JlRGVmYXVsdFNldHRpbmdzIiwiY2JBZnRlclJlc3RvcmVEZWZhdWx0U2V0dGluZ3MiLCJyZXNwb25zZSIsIlVzZXJNZXNzYWdlIiwic2hvd0luZm9ybWF0aW9uIiwiZ3NfQWxsU2V0dGluZ3NEZWxldGVkIiwic2hvd011bHRpU3RyaW5nIiwiY2JCZWZvcmVTZW5kRm9ybSIsInNldHRpbmdzIiwicmVzdWx0IiwiZGF0YSIsImFyckNvZGVjcyIsImVhY2giLCJpbmRleCIsIm9iaiIsImF0dHIiLCJwdXNoIiwiY29kZWNJZCIsImRpc2FibGVkIiwicHJpb3JpdHkiLCJjb2RlY3MiLCJKU09OIiwic3RyaW5naWZ5IiwiY2JBZnRlclNlbmRGb3JtIiwic3VjY2VzcyIsIkZvcm0iLCIkc3VibWl0QnV0dG9uIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmUiLCJ1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SUFBSSxDQUFDbEIsZ0JBQUwsR0FBeUJoRixxQkFBcUIsQ0FBQ2dGLGdCQUEvQztBQUNBa0IsSUFBQUEsSUFBSSxDQUFDRixlQUFMLEdBQXdCaEcscUJBQXFCLENBQUNnRyxlQUE5QztBQUNBRSxJQUFBQSxJQUFJLENBQUN6RCxVQUFMO0FBQ0E7QUFyTzRCLENBQTlCO0FBd09BdkMsQ0FBQyxDQUFDc0csUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFBTTtBQUN2QnpHLEVBQUFBLHFCQUFxQixDQUFDeUMsVUFBdEI7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIE1pa29QQlggLSBmcmVlIHBob25lIHN5c3RlbSBmb3Igc21hbGwgYnVzaW5lc3NcbiAqIENvcHlyaWdodCAoQykgMjAxNy0yMDIwIEFsZXhleSBQb3J0bm92IGFuZCBOaWtvbGF5IEJla2V0b3ZcbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uXG4gKiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cblxuLyogZ2xvYmFsIGdsb2JhbFJvb3RVcmwsZ2xvYmFsVHJhbnNsYXRlLCBGb3JtLCBQYXNzd29yZFNjb3JlLCBQYnhBcGksIFVzZXJNZXNzYWdlLCBTb3VuZEZpbGVzU2VsZWN0b3IsICQgKi9cblxuY29uc3QgZ2VuZXJhbFNldHRpbmdzTW9kaWZ5ID0ge1xuXHQkZGlycnR5RmllbGQ6ICQoJyNkaXJydHknKSxcblx0JGZvcm1PYmo6ICQoJyNnZW5lcmFsLXNldHRpbmdzLWZvcm0nKSxcblx0JHdlYkFkbWluUGFzc3dvcmQ6ICQoJyNXZWJBZG1pblBhc3N3b3JkJyksXG5cdCRzc2hQYXNzd29yZDogJCgnI1NTSFBhc3N3b3JkJyksXG5cdHZhbGlkYXRlUnVsZXM6IHtcblx0XHRwYnhuYW1lOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnUEJYTmFtZScsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2VtcHR5Jyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZUVtcHR5UEJYTmFtZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRXZWJBZG1pblBhc3N3b3JkOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnV2ViQWRtaW5QYXNzd29yZCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2VtcHR5Jyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZUVtcHR5V2ViUGFzc3dvcmQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnbWluTGVuZ3RoWzVdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdlYWtXZWJQYXNzd29yZCxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgICA6ICdub3RSZWdFeHAnLFxuXHRcdFx0XHRcdHZhbHVlICA6IC9bYS16XS8sXG5cdFx0XHRcdFx0cHJvbXB0IDogJzxiPicgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmRzICsgJzwvYj46ICcgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmROb0xvd1NpbXZvbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZSAgIDogJ25vdFJlZ0V4cCcsXG5cdFx0XHRcdFx0dmFsdWUgIDogL1xcZC8sXG5cdFx0XHRcdFx0cHJvbXB0IDogJzxiPicgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmRzICsgJzwvYj46ICcgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmROb051bWJlcnNcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgICA6ICdub3RSZWdFeHAnLFxuXHRcdFx0XHRcdHZhbHVlICA6IC9bQS1aXS8sXG5cdFx0XHRcdFx0cHJvbXB0IDogJzxiPicgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmRzICsgJzwvYj46ICcgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmROb1VwcGVyU2ltdm9sXG5cdFx0XHRcdH1cblx0XHRcdF0sXG5cdFx0fSxcblx0XHRXZWJBZG1pblBhc3N3b3JkUmVwZWF0OiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnV2ViQWRtaW5QYXNzd29yZFJlcGVhdCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ21hdGNoW1dlYkFkbWluUGFzc3dvcmRdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdlYlBhc3N3b3Jkc0ZpZWxkRGlmZmVyZW50LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdFNTSFBhc3N3b3JkOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnU1NIUGFzc3dvcmQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVFbXB0eVNTSFBhc3N3b3JkLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ21pbkxlbmd0aFs1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXZWFrU1NIUGFzc3dvcmQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnbm90UmVnRXhwJyxcblx0XHRcdFx0XHR2YWx1ZSAgOiAvW2Etel0vLFxuXHRcdFx0XHRcdHByb21wdCA6ICc8Yj4nICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1NTSFBhc3N3b3JkICsgJzwvYj46ICcgK2dsb2JhbFRyYW5zbGF0ZS5nc19QYXNzd29yZE5vTG93U2ltdm9sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnbm90UmVnRXhwJyxcblx0XHRcdFx0XHR2YWx1ZSAgOiAvXFxkLyxcblx0XHRcdFx0XHRwcm9tcHQgOiAnPGI+JyArIGdsb2JhbFRyYW5zbGF0ZS5nc19TU0hQYXNzd29yZCArICc8L2I+OiAnICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkTm9OdW1iZXJzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnbm90UmVnRXhwJyxcblx0XHRcdFx0XHR2YWx1ZSAgOiAvW0EtWl0vLFxuXHRcdFx0XHRcdHByb21wdCA6JzxiPicgKyAgZ2xvYmFsVHJhbnNsYXRlLmdzX1NTSFBhc3N3b3JkICsgJzwvYj46ICcgK2dsb2JhbFRyYW5zbGF0ZS5nc19QYXNzd29yZE5vVXBwZXJTaW12b2xcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdFNTSFBhc3N3b3JkUmVwZWF0OiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnU1NIUGFzc3dvcmRSZXBlYXQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdtYXRjaFtTU0hQYXNzd29yZF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlU1NIUGFzc3dvcmRzRmllbGREaWZmZXJlbnQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0V0VCUG9ydDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1dFQlBvcnQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpbnRlZ2VyWzEuLjY1NTM1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXRUJQb3J0T3V0T2ZSYW5nZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkaWZmZXJlbnRbV0VCSFRUUFNQb3J0XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXRUJIVFRQU1BvcnROb3RFcXVhbFRvV0VCUG9ydCxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkaWZmZXJlbnRbQUpBTVBvcnRUTFNdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdFQlBvcnROb3RFcXVhbFRvQWphbVBvcnQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGlmZmVyZW50W0FKQU1Qb3J0XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXRUJQb3J0Tm90RXF1YWxUb0FqYW1UTFNQb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdFdFQkhUVFBTUG9ydDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1dFQkhUVFBTUG9ydCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2ludGVnZXJbMS4uNjU1MzVdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdFQkhUVFBTUG9ydE91dE9mUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGlmZmVyZW50W1dFQlBvcnRdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdFQkhUVFBTUG9ydE5vdEVxdWFsVG9XRUJQb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2RpZmZlcmVudFtBSkFNUG9ydFRMU10nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb0FqYW1Qb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2RpZmZlcmVudFtBSkFNUG9ydF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb0FqYW1UTFNQb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdEFKQU1Qb3J0OiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnQUpBTVBvcnQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpbnRlZ2VyWzEuLjY1NTM1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVBSkFNUG9ydE91dE9mUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGlmZmVyZW50W0FKQU1Qb3J0VExTXScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVBSkFNUG9ydE91dE9mUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdH0sXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0Z2VuZXJhbFNldHRpbmdzTW9kaWZ5LiR3ZWJBZG1pblBhc3N3b3JkLm9uKCdrZXl1cCcsICgpID0+IHtcblx0XHRcdFBhc3N3b3JkU2NvcmUuY2hlY2tQYXNzU3RyZW5ndGgoe1xuXHRcdFx0XHRwYXNzOiBnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJHdlYkFkbWluUGFzc3dvcmQudmFsKCksXG5cdFx0XHRcdGJhcjogJCgnLnBhc3N3b3JkLXNjb3JlJyksXG5cdFx0XHRcdHNlY3Rpb246ICQoJy5wYXNzd29yZC1zY29yZS1zZWN0aW9uJyksXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJHNzaFBhc3N3b3JkLm9uKCdrZXl1cCcsICgpID0+IHtcblx0XHRcdFBhc3N3b3JkU2NvcmUuY2hlY2tQYXNzU3RyZW5ndGgoe1xuXHRcdFx0XHRwYXNzOiBnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJHNzaFBhc3N3b3JkLnZhbCgpLFxuXHRcdFx0XHRiYXI6ICQoJy5zc2gtcGFzc3dvcmQtc2NvcmUnKSxcblx0XHRcdFx0c2VjdGlvbjogJCgnLnNzaC1wYXNzd29yZC1zY29yZS1zZWN0aW9uJyksXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHQkKCcjZ2VuZXJhbC1zZXR0aW5ncy1tZW51JykuZmluZCgnLml0ZW0nKS50YWIoe1xuXHRcdFx0aGlzdG9yeTogdHJ1ZSxcblx0XHRcdGhpc3RvcnlUeXBlOiAnaGFzaCcsXG5cdFx0fSk7XG5cdFx0JCgnI2dlbmVyYWwtc2V0dGluZ3MtZm9ybSAuY2hlY2tib3gnKS5jaGVja2JveCgpO1xuXHRcdCQoJyNnZW5lcmFsLXNldHRpbmdzLWZvcm0gLmRyb3Bkb3duJykuZHJvcGRvd24oKTtcblxuXHRcdCQoJyNhdWRpby1jb2RlY3MtdGFibGUsICN2aWRlby1jb2RlY3MtdGFibGUnKS50YWJsZURuRCh7XG5cdFx0XHRvbkRyb3AoKSB7XG5cdFx0XHRcdGdlbmVyYWxTZXR0aW5nc01vZGlmeS4kZGlycnR5RmllbGQudmFsKE1hdGgucmFuZG9tKCkpO1xuXHRcdFx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJGRpcnJ0eUZpZWxkLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0fSxcblx0XHRcdG9uRHJhZ0NsYXNzOiAnaG92ZXJpbmdSb3cnLFxuXHRcdFx0ZHJhZ0hhbmRsZTogJy5kcmFnSGFuZGxlJyxcblx0XHR9KTtcblxuXHRcdCQoJyNnZW5lcmFsLXNldHRpbmdzLWZvcm0gLmF1ZGlvLW1lc3NhZ2Utc2VsZWN0JykuZHJvcGRvd24oU291bmRGaWxlc1NlbGVjdG9yLmdldERyb3Bkb3duU2V0dGluZ3NXaXRoRW1wdHkoKSk7XG5cblx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkuaW5pdGlhbGl6ZUZvcm0oKTtcblx0XHQkKHdpbmRvdykub24oJ0dTLUFjdGl2YXRlVGFiJywgKGV2ZW50LCBuYW1lVGFiKSA9PiB7XG5cdFx0XHQkKCcjZ2VuZXJhbC1zZXR0aW5ncy1tZW51JykuZmluZCgnLml0ZW0nKS50YWIoJ2NoYW5nZSB0YWInLCBuYW1lVGFiKTtcblx0XHR9KTtcblx0fSxcblx0Y2hlY2tEZWxldGVBbGxDb25kaXRpb25zKCl7XG5cdFx0Y29uc3QgZGVsZXRlQWxsSW5wdXQgPSBnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ2RlbGV0ZUFsbElucHV0Jyk7XG5cdFx0aWYgKGRlbGV0ZUFsbElucHV0ID09PSBnbG9iYWxUcmFuc2xhdGUuZ3NfRW50ZXJEZWxldGVBbGxQaHJhc2Upe1xuXHRcdFx0UGJ4QXBpLlN5c3RlbVJlc3RvcmVEZWZhdWx0U2V0dGluZ3MoZ2VuZXJhbFNldHRpbmdzTW9kaWZ5LmNiQWZ0ZXJSZXN0b3JlRGVmYXVsdFNldHRpbmdzKTtcblx0XHR9XG5cblx0fSxcblx0Y2JBZnRlclJlc3RvcmVEZWZhdWx0U2V0dGluZ3MocmVzcG9uc2Upe1xuXHRcdGlmIChyZXNwb25zZT09PXRydWUpe1xuXHRcdFx0VXNlck1lc3NhZ2Uuc2hvd0luZm9ybWF0aW9uKGdsb2JhbFRyYW5zbGF0ZS5nc19BbGxTZXR0aW5nc0RlbGV0ZWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRVc2VyTWVzc2FnZS5zaG93TXVsdGlTdHJpbmcocmVzcG9uc2UpO1xuXHRcdH1cblx0fSxcblx0Y2JCZWZvcmVTZW5kRm9ybShzZXR0aW5ncykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHNldHRpbmdzO1xuXHRcdHJlc3VsdC5kYXRhID0gZ2VuZXJhbFNldHRpbmdzTW9kaWZ5LiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZXMnKTtcblx0XHRjb25zdCBhcnJDb2RlY3MgPSBbXTtcblx0XHQkKCcjYXVkaW8tY29kZWNzLXRhYmxlIC5jb2RlYy1yb3csICN2aWRlby1jb2RlY3MtdGFibGUgLmNvZGVjLXJvdycpLmVhY2goKGluZGV4LCBvYmopID0+IHtcblx0XHRcdGlmICgkKG9iaikuYXR0cignaWQnKSkge1xuXHRcdFx0XHRhcnJDb2RlY3MucHVzaCh7XG5cdFx0XHRcdFx0Y29kZWNJZDogJChvYmopLmF0dHIoJ2lkJyksXG5cdFx0XHRcdFx0ZGlzYWJsZWQ6ICQob2JqKS5maW5kKCcuY2hlY2tib3gnKS5jaGVja2JveCgnaXMgdW5jaGVja2VkJyksXG5cdFx0XHRcdFx0cHJpb3JpdHk6IGluZGV4LFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXN1bHQuZGF0YS5jb2RlY3MgPSBKU09OLnN0cmluZ2lmeShhcnJDb2RlY3MpO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblx0Y2JBZnRlclNlbmRGb3JtKHJlc3BvbnNlKSB7XG5cdFx0aWYoIXJlc3BvbnNlLnN1Y2Nlc3Mpe1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdH1lbHNle1xuXHRcdFx0JCgnLnBhc3N3b3JkLXZhbGlkYXRlJykucmVtb3ZlKCk7XG5cdFx0fVxuXHRcdGdlbmVyYWxTZXR0aW5nc01vZGlmeS5jaGVja0RlbGV0ZUFsbENvbmRpdGlvbnMoKTtcblx0fSxcblx0aW5pdGlhbGl6ZUZvcm0oKSB7XG5cdFx0Rm9ybS4kZm9ybU9iaiBcdFx0XHQ9IGdlbmVyYWxTZXR0aW5nc01vZGlmeS4kZm9ybU9iajtcblx0XHRGb3JtLnVybCBcdFx0XHRcdD0gYCR7Z2xvYmFsUm9vdFVybH1nZW5lcmFsLXNldHRpbmdzL3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyBcdFx0PSBnZW5lcmFsU2V0dGluZ3NNb2RpZnkudmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gXHQ9IGdlbmVyYWxTZXR0aW5nc01vZGlmeS5jYkJlZm9yZVNlbmRGb3JtO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtIFx0PSBnZW5lcmFsU2V0dGluZ3NNb2RpZnkuY2JBZnRlclNlbmRGb3JtO1xuXHRcdEZvcm0uaW5pdGlhbGl6ZSgpO1xuXHR9XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cdGdlbmVyYWxTZXR0aW5nc01vZGlmeS5pbml0aWFsaXplKCk7XG59KTsiXX0=