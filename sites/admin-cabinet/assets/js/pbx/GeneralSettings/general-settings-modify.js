"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl,globalTranslate, Form, PasswordScore, PbxApi, UserMessage, SoundFilesSelector, $ */
var generalSettingsModify = {
  $dirrtyField: $('#dirrty'),
  $formObj: $('#general-settings-form'),
  $webAdminPassword: $('#WebAdminPassword'),
  $sshPassword: $('#SSHPassword'),
  validateRules: {
    // generalSettingsModify.validateRules.SSHPassword.rules
    pbxname: {
      identifier: 'PBXName',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.gs_ValidateEmptyPBXName
      }]
    },
    WebAdminPassword: {
      identifier: 'WebAdminPassword',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.gs_ValidateEmptyWebPassword
      }, {
        type: 'minLength[5]',
        prompt: globalTranslate.gs_ValidateWeakWebPassword
      }, {
        type: 'notRegExp',
        value: /[a-z]/,
        prompt: '<b>' + globalTranslate.gs_Passwords + '</b>: ' + globalTranslate.gs_PasswordNoLowSimvol
      }, {
        type: 'notRegExp',
        value: /\d/,
        prompt: '<b>' + globalTranslate.gs_Passwords + '</b>: ' + globalTranslate.gs_PasswordNoNumbers
      }, {
        type: 'notRegExp',
        value: /[A-Z]/,
        prompt: '<b>' + globalTranslate.gs_Passwords + '</b>: ' + globalTranslate.gs_PasswordNoUpperSimvol
      }]
    },
    WebAdminPasswordRepeat: {
      identifier: 'WebAdminPasswordRepeat',
      rules: [{
        type: 'match[WebAdminPassword]',
        prompt: globalTranslate.gs_ValidateWebPasswordsFieldDifferent
      }]
    },
    SSHPassword: {
      identifier: 'SSHPassword',
      rules: []
    },
    SSHPasswordRepeat: {
      identifier: 'SSHPasswordRepeat',
      rules: [{
        type: 'match[SSHPassword]',
        prompt: globalTranslate.gs_ValidateSSHPasswordsFieldDifferent
      }]
    },
    WEBPort: {
      identifier: 'WEBPort',
      rules: [{
        type: 'integer[1..65535]',
        prompt: globalTranslate.gs_ValidateWEBPortOutOfRange
      }, {
        type: 'different[WEBHTTPSPort]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToWEBPort
      }, {
        type: 'different[AJAMPortTLS]',
        prompt: globalTranslate.gs_ValidateWEBPortNotEqualToAjamPort
      }, {
        type: 'different[AJAMPort]',
        prompt: globalTranslate.gs_ValidateWEBPortNotEqualToAjamTLSPort
      }]
    },
    WEBHTTPSPort: {
      identifier: 'WEBHTTPSPort',
      rules: [{
        type: 'integer[1..65535]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortOutOfRange
      }, {
        type: 'different[WEBPort]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToWEBPort
      }, {
        type: 'different[AJAMPortTLS]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToAjamPort
      }, {
        type: 'different[AJAMPort]',
        prompt: globalTranslate.gs_ValidateWEBHTTPSPortNotEqualToAjamTLSPort
      }]
    },
    AJAMPort: {
      identifier: 'AJAMPort',
      rules: [{
        type: 'integer[1..65535]',
        prompt: globalTranslate.gs_ValidateAJAMPortOutOfRange
      }, {
        type: 'different[AJAMPortTLS]',
        prompt: globalTranslate.gs_ValidateAJAMPortOutOfRange
      }]
    }
  },
  additionalSshValidRulesPass: [{
    type: 'empty',
    prompt: globalTranslate.gs_ValidateEmptySSHPassword
  }, {
    type: 'minLength[5]',
    prompt: globalTranslate.gs_ValidateWeakSSHPassword
  }, {
    type: 'notRegExp',
    value: /[a-z]/,
    prompt: '<b>' + globalTranslate.gs_SSHPassword + '</b>: ' + globalTranslate.gs_PasswordNoLowSimvol
  }, {
    type: 'notRegExp',
    value: /\d/,
    prompt: '<b>' + globalTranslate.gs_SSHPassword + '</b>: ' + globalTranslate.gs_PasswordNoNumbers
  }, {
    type: 'notRegExp',
    value: /[A-Z]/,
    prompt: '<b>' + globalTranslate.gs_SSHPassword + '</b>: ' + globalTranslate.gs_PasswordNoUpperSimvol
  }],
  additionalSshValidRulesNoPass: [{
    type: 'empty',
    prompt: globalTranslate.gs_ValidateEmptySSHPassword
  }, {
    type: 'minLength[5]',
    prompt: globalTranslate.gs_ValidateWeakSSHPassword
  }],
  initialize: function initialize() {
    generalSettingsModify.$webAdminPassword.on('keyup', function () {
      PasswordScore.checkPassStrength({
        pass: generalSettingsModify.$webAdminPassword.val(),
        bar: $('.password-score'),
        section: $('.password-score-section')
      });
    });
    generalSettingsModify.$sshPassword.on('keyup', function () {
      PasswordScore.checkPassStrength({
        pass: generalSettingsModify.$sshPassword.val(),
        bar: $('.ssh-password-score'),
        section: $('.ssh-password-score-section')
      });
    });
    $('#general-settings-menu').find('.item').tab({
      history: true,
      historyType: 'hash'
    });
    $('#general-settings-form .checkbox').checkbox({
      'onChange': generalSettingsModify.initRules
    });
    $('#general-settings-form .dropdown').dropdown();
    $('#audio-codecs-table, #video-codecs-table').tableDnD({
      onDrop: function onDrop() {
        generalSettingsModify.$dirrtyField.val(Math.random());
        generalSettingsModify.$dirrtyField.trigger('change');
      },
      onDragClass: 'hoveringRow',
      dragHandle: '.dragHandle'
    });
    $('#general-settings-form .audio-message-select').dropdown(SoundFilesSelector.getDropdownSettingsWithEmpty());
    generalSettingsModify.initializeForm();
    $(window).on('GS-ActivateTab', function (event, nameTab) {
      $('#general-settings-menu').find('.item').tab('change tab', nameTab);
    });
  },
  checkDeleteAllConditions: function checkDeleteAllConditions() {
    var deleteAllInput = generalSettingsModify.$formObj.form('get value', 'deleteAllInput');

    if (deleteAllInput === globalTranslate.gs_EnterDeleteAllPhrase) {
      PbxApi.SystemRestoreDefaultSettings(generalSettingsModify.cbAfterRestoreDefaultSettings);
    }
  },
  cbAfterRestoreDefaultSettings: function cbAfterRestoreDefaultSettings(response) {
    if (response === true) {
      UserMessage.showInformation(globalTranslate.gs_AllSettingsDeleted);
    } else {
      UserMessage.showMultiString(response);
    }
  },
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = generalSettingsModify.$formObj.form('get values');
    var arrCodecs = [];
    $('#audio-codecs-table .codec-row, #video-codecs-table .codec-row').each(function (index, obj) {
      if ($(obj).attr('id')) {
        arrCodecs.push({
          codecId: $(obj).attr('id'),
          disabled: $(obj).find('.checkbox').checkbox('is unchecked'),
          priority: index
        });
      }
    });
    result.data.codecs = JSON.stringify(arrCodecs);
    return result;
  },
  cbAfterSendForm: function cbAfterSendForm(response) {
    if (!response.success) {
      Form.$submitButton.removeClass('disabled');
    } else {
      $('.password-validate').remove();
    }

    generalSettingsModify.checkDeleteAllConditions();
  },
  initRules: function initRules() {
    if ($('#SSHDisablePasswordLogins').parent().checkbox('is checked')) {
      generalSettingsModify.validateRules.SSHPassword.rules = generalSettingsModify.additionalSshValidRulesNoPass;
    } else {
      generalSettingsModify.validateRules.SSHPassword.rules = generalSettingsModify.additionalSshValidRulesPass;
    }
  },
  initializeForm: function initializeForm() {
    generalSettingsModify.initRules();
    Form.$formObj = generalSettingsModify.$formObj;
    Form.url = "".concat(globalRootUrl, "general-settings/save");
    Form.validateRules = generalSettingsModify.validateRules;
    Form.cbBeforeSendForm = generalSettingsModify.cbBeforeSendForm;
    Form.cbAfterSendForm = generalSettingsModify.cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  generalSettingsModify.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9HZW5lcmFsU2V0dGluZ3MvZ2VuZXJhbC1zZXR0aW5ncy1tb2RpZnkuanMiXSwibmFtZXMiOlsiZ2VuZXJhbFNldHRpbmdzTW9kaWZ5IiwiJGRpcnJ0eUZpZWxkIiwiJCIsIiRmb3JtT2JqIiwiJHdlYkFkbWluUGFzc3dvcmQiLCIkc3NoUGFzc3dvcmQiLCJ2YWxpZGF0ZVJ1bGVzIiwicGJ4bmFtZSIsImlkZW50aWZpZXIiLCJydWxlcyIsInR5cGUiLCJwcm9tcHQiLCJnbG9iYWxUcmFuc2xhdGUiLCJnc19WYWxpZGF0ZUVtcHR5UEJYTmFtZSIsIldlYkFkbWluUGFzc3dvcmQiLCJnc19WYWxpZGF0ZUVtcHR5V2ViUGFzc3dvcmQiLCJnc19WYWxpZGF0ZVdlYWtXZWJQYXNzd29yZCIsInZhbHVlIiwiZ3NfUGFzc3dvcmRzIiwiZ3NfUGFzc3dvcmROb0xvd1NpbXZvbCIsImdzX1Bhc3N3b3JkTm9OdW1iZXJzIiwiZ3NfUGFzc3dvcmROb1VwcGVyU2ltdm9sIiwiV2ViQWRtaW5QYXNzd29yZFJlcGVhdCIsImdzX1ZhbGlkYXRlV2ViUGFzc3dvcmRzRmllbGREaWZmZXJlbnQiLCJTU0hQYXNzd29yZCIsIlNTSFBhc3N3b3JkUmVwZWF0IiwiZ3NfVmFsaWRhdGVTU0hQYXNzd29yZHNGaWVsZERpZmZlcmVudCIsIldFQlBvcnQiLCJnc19WYWxpZGF0ZVdFQlBvcnRPdXRPZlJhbmdlIiwiZ3NfVmFsaWRhdGVXRUJIVFRQU1BvcnROb3RFcXVhbFRvV0VCUG9ydCIsImdzX1ZhbGlkYXRlV0VCUG9ydE5vdEVxdWFsVG9BamFtUG9ydCIsImdzX1ZhbGlkYXRlV0VCUG9ydE5vdEVxdWFsVG9BamFtVExTUG9ydCIsIldFQkhUVFBTUG9ydCIsImdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0T3V0T2ZSYW5nZSIsImdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb0FqYW1Qb3J0IiwiZ3NfVmFsaWRhdGVXRUJIVFRQU1BvcnROb3RFcXVhbFRvQWphbVRMU1BvcnQiLCJBSkFNUG9ydCIsImdzX1ZhbGlkYXRlQUpBTVBvcnRPdXRPZlJhbmdlIiwiYWRkaXRpb25hbFNzaFZhbGlkUnVsZXNQYXNzIiwiZ3NfVmFsaWRhdGVFbXB0eVNTSFBhc3N3b3JkIiwiZ3NfVmFsaWRhdGVXZWFrU1NIUGFzc3dvcmQiLCJnc19TU0hQYXNzd29yZCIsImFkZGl0aW9uYWxTc2hWYWxpZFJ1bGVzTm9QYXNzIiwiaW5pdGlhbGl6ZSIsIm9uIiwiUGFzc3dvcmRTY29yZSIsImNoZWNrUGFzc1N0cmVuZ3RoIiwicGFzcyIsInZhbCIsImJhciIsInNlY3Rpb24iLCJmaW5kIiwidGFiIiwiaGlzdG9yeSIsImhpc3RvcnlUeXBlIiwiY2hlY2tib3giLCJpbml0UnVsZXMiLCJkcm9wZG93biIsInRhYmxlRG5EIiwib25Ecm9wIiwiTWF0aCIsInJhbmRvbSIsInRyaWdnZXIiLCJvbkRyYWdDbGFzcyIsImRyYWdIYW5kbGUiLCJTb3VuZEZpbGVzU2VsZWN0b3IiLCJnZXREcm9wZG93blNldHRpbmdzV2l0aEVtcHR5IiwiaW5pdGlhbGl6ZUZvcm0iLCJ3aW5kb3ciLCJldmVudCIsIm5hbWVUYWIiLCJjaGVja0RlbGV0ZUFsbENvbmRpdGlvbnMiLCJkZWxldGVBbGxJbnB1dCIsImZvcm0iLCJnc19FbnRlckRlbGV0ZUFsbFBocmFzZSIsIlBieEFwaSIsIlN5c3RlbVJlc3RvcmVEZWZhdWx0U2V0dGluZ3MiLCJjYkFmdGVyUmVzdG9yZURlZmF1bHRTZXR0aW5ncyIsInJlc3BvbnNlIiwiVXNlck1lc3NhZ2UiLCJzaG93SW5mb3JtYXRpb24iLCJnc19BbGxTZXR0aW5nc0RlbGV0ZWQiLCJzaG93TXVsdGlTdHJpbmciLCJjYkJlZm9yZVNlbmRGb3JtIiwic2V0dGluZ3MiLCJyZXN1bHQiLCJkYXRhIiwiYXJyQ29kZWNzIiwiZWFjaCIsImluZGV4Iiwib2JqIiwiYXR0ciIsInB1c2giLCJjb2RlY0lkIiwiZGlzYWJsZWQiLCJwcmlvcml0eSIsImNvZGVjcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYkFmdGVyU2VuZEZvcm0iLCJzdWNjZXNzIiwiRm9ybSIsIiRzdWJtaXRCdXR0b24iLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsInBhcmVudCIsInVybCIsImdsb2JhbFJvb3RVcmwiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFFQSxJQUFNQSxxQkFBcUIsR0FBRztBQUM3QkMsRUFBQUEsWUFBWSxFQUFFQyxDQUFDLENBQUMsU0FBRCxDQURjO0FBRTdCQyxFQUFBQSxRQUFRLEVBQUVELENBQUMsQ0FBQyx3QkFBRCxDQUZrQjtBQUc3QkUsRUFBQUEsaUJBQWlCLEVBQUVGLENBQUMsQ0FBQyxtQkFBRCxDQUhTO0FBSTdCRyxFQUFBQSxZQUFZLEVBQUVILENBQUMsQ0FBQyxjQUFELENBSmM7QUFLN0JJLEVBQUFBLGFBQWEsRUFBRTtBQUFFO0FBQ2hCQyxJQUFBQSxPQUFPLEVBQUU7QUFDUkMsTUFBQUEsVUFBVSxFQUFFLFNBREo7QUFFUkMsTUFBQUEsS0FBSyxFQUFFLENBQ047QUFDQ0MsUUFBQUEsSUFBSSxFQUFFLE9BRFA7QUFFQ0MsUUFBQUEsTUFBTSxFQUFFQyxlQUFlLENBQUNDO0FBRnpCLE9BRE07QUFGQyxLQURLO0FBVWRDLElBQUFBLGdCQUFnQixFQUFFO0FBQ2pCTixNQUFBQSxVQUFVLEVBQUUsa0JBREs7QUFFakJDLE1BQUFBLEtBQUssRUFBRSxDQUNOO0FBQ0NDLFFBQUFBLElBQUksRUFBRSxPQURQO0FBRUNDLFFBQUFBLE1BQU0sRUFBRUMsZUFBZSxDQUFDRztBQUZ6QixPQURNLEVBS047QUFDQ0wsUUFBQUEsSUFBSSxFQUFFLGNBRFA7QUFFQ0MsUUFBQUEsTUFBTSxFQUFFQyxlQUFlLENBQUNJO0FBRnpCLE9BTE0sRUFTTjtBQUNDTixRQUFBQSxJQUFJLEVBQUssV0FEVjtBQUVDTyxRQUFBQSxLQUFLLEVB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QzBHLFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQU07QUFDdkI3RyxFQUFBQSxxQkFBcUIsQ0FBQzJDLFVBQXRCO0FBQ0EsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBNaWtvUEJYIC0gZnJlZSBwaG9uZSBzeXN0ZW0gZm9yIHNtYWxsIGJ1c2luZXNzXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTctMjAyMCBBbGV4ZXkgUG9ydG5vdiBhbmQgTmlrb2xheSBCZWtldG92XG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLlxuICogSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG5cbi8qIGdsb2JhbCBnbG9iYWxSb290VXJsLGdsb2JhbFRyYW5zbGF0ZSwgRm9ybSwgUGFzc3dvcmRTY29yZSwgUGJ4QXBpLCBVc2VyTWVzc2FnZSwgU291bmRGaWxlc1NlbGVjdG9yLCAkICovXG5cbmNvbnN0IGdlbmVyYWxTZXR0aW5nc01vZGlmeSA9IHtcblx0JGRpcnJ0eUZpZWxkOiAkKCcjZGlycnR5JyksXG5cdCRmb3JtT2JqOiAkKCcjZ2VuZXJhbC1zZXR0aW5ncy1mb3JtJyksXG5cdCR3ZWJBZG1pblBhc3N3b3JkOiAkKCcjV2ViQWRtaW5QYXNzd29yZCcpLFxuXHQkc3NoUGFzc3dvcmQ6ICQoJyNTU0hQYXNzd29yZCcpLFxuXHR2YWxpZGF0ZVJ1bGVzOiB7IC8vIGdlbmVyYWxTZXR0aW5nc01vZGlmeS52YWxpZGF0ZVJ1bGVzLlNTSFBhc3N3b3JkLnJ1bGVzXG5cdFx0cGJ4bmFtZToge1xuXHRcdFx0aWRlbnRpZmllcjogJ1BCWE5hbWUnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVFbXB0eVBCWE5hbWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0V2ViQWRtaW5QYXNzd29yZDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1dlYkFkbWluUGFzc3dvcmQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVFbXB0eVdlYlBhc3N3b3JkLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ21pbkxlbmd0aFs1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXZWFrV2ViUGFzc3dvcmQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnbm90UmVnRXhwJyxcblx0XHRcdFx0XHR2YWx1ZSAgOiAvW2Etel0vLFxuXHRcdFx0XHRcdHByb21wdCA6ICc8Yj4nICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkcyArICc8L2I+OiAnICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkTm9Mb3dTaW12b2xcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGUgICA6ICdub3RSZWdFeHAnLFxuXHRcdFx0XHRcdHZhbHVlICA6IC9cXGQvLFxuXHRcdFx0XHRcdHByb21wdCA6ICc8Yj4nICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkcyArICc8L2I+OiAnICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkTm9OdW1iZXJzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlICAgOiAnbm90UmVnRXhwJyxcblx0XHRcdFx0XHR2YWx1ZSAgOiAvW0EtWl0vLFxuXHRcdFx0XHRcdHByb21wdCA6ICc8Yj4nICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkcyArICc8L2I+OiAnICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkTm9VcHBlclNpbXZvbFxuXHRcdFx0XHR9XG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0V2ViQWRtaW5QYXNzd29yZFJlcGVhdDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1dlYkFkbWluUGFzc3dvcmRSZXBlYXQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdtYXRjaFtXZWJBZG1pblBhc3N3b3JkXScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXZWJQYXNzd29yZHNGaWVsZERpZmZlcmVudCxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRTU0hQYXNzd29yZDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1NTSFBhc3N3b3JkJyxcblx0XHRcdHJ1bGVzOiBbXSxcblx0XHR9LFxuXHRcdFNTSFBhc3N3b3JkUmVwZWF0OiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnU1NIUGFzc3dvcmRSZXBlYXQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdtYXRjaFtTU0hQYXNzd29yZF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlU1NIUGFzc3dvcmRzRmllbGREaWZmZXJlbnQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0V0VCUG9ydDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1dFQlBvcnQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpbnRlZ2VyWzEuLjY1NTM1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXRUJQb3J0T3V0T2ZSYW5nZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkaWZmZXJlbnRbV0VCSFRUUFNQb3J0XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXRUJIVFRQU1BvcnROb3RFcXVhbFRvV0VCUG9ydCxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdkaWZmZXJlbnRbQUpBTVBvcnRUTFNdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdFQlBvcnROb3RFcXVhbFRvQWphbVBvcnQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGlmZmVyZW50W0FKQU1Qb3J0XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVXRUJQb3J0Tm90RXF1YWxUb0FqYW1UTFNQb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdFdFQkhUVFBTUG9ydDoge1xuXHRcdFx0aWRlbnRpZmllcjogJ1dFQkhUVFBTUG9ydCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2ludGVnZXJbMS4uNjU1MzVdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdFQkhUVFBTUG9ydE91dE9mUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGlmZmVyZW50W1dFQlBvcnRdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZVdFQkhUVFBTUG9ydE5vdEVxdWFsVG9XRUJQb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2RpZmZlcmVudFtBSkFNUG9ydFRMU10nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb0FqYW1Qb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2RpZmZlcmVudFtBSkFNUG9ydF0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlV0VCSFRUUFNQb3J0Tm90RXF1YWxUb0FqYW1UTFNQb3J0LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdEFKQU1Qb3J0OiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnQUpBTVBvcnQnLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpbnRlZ2VyWzEuLjY1NTM1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVBSkFNUG9ydE91dE9mUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZGlmZmVyZW50W0FKQU1Qb3J0VExTXScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUuZ3NfVmFsaWRhdGVBSkFNUG9ydE91dE9mUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdH0sXG5cdGFkZGl0aW9uYWxTc2hWYWxpZFJ1bGVzUGFzczogW1xuXHRcdHtcblx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZUVtcHR5U1NIUGFzc3dvcmQsXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR0eXBlOiAnbWluTGVuZ3RoWzVdJyxcblx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlV2Vha1NTSFBhc3N3b3JkLFxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dHlwZSAgIDogJ25vdFJlZ0V4cCcsXG5cdFx0XHR2YWx1ZSAgOiAvW2Etel0vLFxuXHRcdFx0cHJvbXB0IDogJzxiPicgKyBnbG9iYWxUcmFuc2xhdGUuZ3NfU1NIUGFzc3dvcmQgKyAnPC9iPjogJyArZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkTm9Mb3dTaW12b2xcblx0XHR9LFxuXHRcdHtcblx0XHRcdHR5cGUgICA6ICdub3RSZWdFeHAnLFxuXHRcdFx0dmFsdWUgIDogL1xcZC8sXG5cdFx0XHRwcm9tcHQgOiAnPGI+JyArIGdsb2JhbFRyYW5zbGF0ZS5nc19TU0hQYXNzd29yZCArICc8L2I+OiAnICsgZ2xvYmFsVHJhbnNsYXRlLmdzX1Bhc3N3b3JkTm9OdW1iZXJzXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR0eXBlICAgOiAnbm90UmVnRXhwJyxcblx0XHRcdHZhbHVlICA6IC9bQS1aXS8sXG5cdFx0XHRwcm9tcHQgOic8Yj4nICsgIGdsb2JhbFRyYW5zbGF0ZS5nc19TU0hQYXNzd29yZCArICc8L2I+OiAnICtnbG9iYWxUcmFuc2xhdGUuZ3NfUGFzc3dvcmROb1VwcGVyU2ltdm9sXG5cdFx0fVxuXHRdLFxuXHRhZGRpdGlvbmFsU3NoVmFsaWRSdWxlc05vUGFzczogW1xuXHRcdHtcblx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5nc19WYWxpZGF0ZUVtcHR5U1NIUGFzc3dvcmQsXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR0eXBlOiAnbWluTGVuZ3RoWzVdJyxcblx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmdzX1ZhbGlkYXRlV2Vha1NTSFBhc3N3b3JkLFxuXHRcdH1cblx0XSxcblx0aW5pdGlhbGl6ZSgpIHtcblx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJHdlYkFkbWluUGFzc3dvcmQub24oJ2tleXVwJywgKCkgPT4ge1xuXHRcdFx0UGFzc3dvcmRTY29yZS5jaGVja1Bhc3NTdHJlbmd0aCh7XG5cdFx0XHRcdHBhc3M6IGdlbmVyYWxTZXR0aW5nc01vZGlmeS4kd2ViQWRtaW5QYXNzd29yZC52YWwoKSxcblx0XHRcdFx0YmFyOiAkKCcucGFzc3dvcmQtc2NvcmUnKSxcblx0XHRcdFx0c2VjdGlvbjogJCgnLnBhc3N3b3JkLXNjb3JlLXNlY3Rpb24nKSxcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdGdlbmVyYWxTZXR0aW5nc01vZGlmeS4kc3NoUGFzc3dvcmQub24oJ2tleXVwJywgKCkgPT4ge1xuXHRcdFx0UGFzc3dvcmRTY29yZS5jaGVja1Bhc3NTdHJlbmd0aCh7XG5cdFx0XHRcdHBhc3M6IGdlbmVyYWxTZXR0aW5nc01vZGlmeS4kc3NoUGFzc3dvcmQudmFsKCksXG5cdFx0XHRcdGJhcjogJCgnLnNzaC1wYXNzd29yZC1zY29yZScpLFxuXHRcdFx0XHRzZWN0aW9uOiAkKCcuc3NoLXBhc3N3b3JkLXNjb3JlLXNlY3Rpb24nKSxcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdCQoJyNnZW5lcmFsLXNldHRpbmdzLW1lbnUnKS5maW5kKCcuaXRlbScpLnRhYih7XG5cdFx0XHRoaXN0b3J5OiB0cnVlLFxuXHRcdFx0aGlzdG9yeVR5cGU6ICdoYXNoJyxcblx0XHR9KTtcblx0XHQkKCcjZ2VuZXJhbC1zZXR0aW5ncy1mb3JtIC5jaGVja2JveCcpLmNoZWNrYm94KFxuXHRcdFx0e1xuXHRcdFx0XHQnb25DaGFuZ2UnOiBnZW5lcmFsU2V0dGluZ3NNb2RpZnkuaW5pdFJ1bGVzXG5cdFx0XHR9XG5cdFx0KTtcblx0XHQkKCcjZ2VuZXJhbC1zZXR0aW5ncy1mb3JtIC5kcm9wZG93bicpLmRyb3Bkb3duKCk7XG5cblx0XHQkKCcjYXVkaW8tY29kZWNzLXRhYmxlLCAjdmlkZW8tY29kZWNzLXRhYmxlJykudGFibGVEbkQoe1xuXHRcdFx0b25Ecm9wKCkge1xuXHRcdFx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkuJGRpcnJ0eUZpZWxkLnZhbChNYXRoLnJhbmRvbSgpKTtcblx0XHRcdFx0Z2VuZXJhbFNldHRpbmdzTW9kaWZ5LiRkaXJydHlGaWVsZC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdH0sXG5cdFx0XHRvbkRyYWdDbGFzczogJ2hvdmVyaW5nUm93Jyxcblx0XHRcdGRyYWdIYW5kbGU6ICcuZHJhZ0hhbmRsZScsXG5cdFx0fSk7XG5cblx0XHQkKCcjZ2VuZXJhbC1zZXR0aW5ncy1mb3JtIC5hdWRpby1tZXNzYWdlLXNlbGVjdCcpLmRyb3Bkb3duKFNvdW5kRmlsZXNTZWxlY3Rvci5nZXREcm9wZG93blNldHRpbmdzV2l0aEVtcHR5KCkpO1xuXG5cdFx0Z2VuZXJhbFNldHRpbmdzTW9kaWZ5LmluaXRpYWxpemVGb3JtKCk7XG5cdFx0JCh3aW5kb3cpLm9uKCdHUy1BY3RpdmF0ZVRhYicsIChldmVudCwgbmFtZVRhYikgPT4ge1xuXHRcdFx0JCgnI2dlbmVyYWwtc2V0dGluZ3MtbWVudScpLmZpbmQoJy5pdGVtJykudGFiKCdjaGFuZ2UgdGFiJywgbmFtZVRhYik7XG5cdFx0fSk7XG5cdH0sXG5cdGNoZWNrRGVsZXRlQWxsQ29uZGl0aW9ucygpe1xuXHRcdGNvbnN0IGRlbGV0ZUFsbElucHV0ID0gZ2VuZXJhbFNldHRpbmdzTW9kaWZ5LiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICdkZWxldGVBbGxJbnB1dCcpO1xuXHRcdGlmIChkZWxldGVBbGxJbnB1dCA9PT0gZ2xvYmFsVHJhbnNsYXRlLmdzX0VudGVyRGVsZXRlQWxsUGhyYXNlKXtcblx0XHRcdFBieEFwaS5TeXN0ZW1SZXN0b3JlRGVmYXVsdFNldHRpbmdzKGdlbmVyYWxTZXR0aW5nc01vZGlmeS5jYkFmdGVyUmVzdG9yZURlZmF1bHRTZXR0aW5ncyk7XG5cdFx0fVxuXG5cdH0sXG5cdGNiQWZ0ZXJSZXN0b3JlRGVmYXVsdFNldHRpbmdzKHJlc3BvbnNlKXtcblx0XHRpZiAocmVzcG9uc2U9PT10cnVlKXtcblx0XHRcdFVzZXJNZXNzYWdlLnNob3dJbmZvcm1hdGlvbihnbG9iYWxUcmFuc2xhdGUuZ3NfQWxsU2V0dGluZ3NEZWxldGVkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0VXNlck1lc3NhZ2Uuc2hvd011bHRpU3RyaW5nKHJlc3BvbnNlKTtcblx0XHR9XG5cdH0sXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHRyZXN1bHQuZGF0YSA9IGdlbmVyYWxTZXR0aW5nc01vZGlmeS4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0Y29uc3QgYXJyQ29kZWNzID0gW107XG5cdFx0JCgnI2F1ZGlvLWNvZGVjcy10YWJsZSAuY29kZWMtcm93LCAjdmlkZW8tY29kZWNzLXRhYmxlIC5jb2RlYy1yb3cnKS5lYWNoKChpbmRleCwgb2JqKSA9PiB7XG5cdFx0XHRpZiAoJChvYmopLmF0dHIoJ2lkJykpIHtcblx0XHRcdFx0YXJyQ29kZWNzLnB1c2goe1xuXHRcdFx0XHRcdGNvZGVjSWQ6ICQob2JqKS5hdHRyKCdpZCcpLFxuXHRcdFx0XHRcdGRpc2FibGVkOiAkKG9iaikuZmluZCgnLmNoZWNrYm94JykuY2hlY2tib3goJ2lzIHVuY2hlY2tlZCcpLFxuXHRcdFx0XHRcdHByaW9yaXR5OiBpbmRleCxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmVzdWx0LmRhdGEuY29kZWNzID0gSlNPTi5zdHJpbmdpZnkoYXJyQ29kZWNzKTtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cdGNiQWZ0ZXJTZW5kRm9ybShyZXNwb25zZSkge1xuXHRcdGlmKCFyZXNwb25zZS5zdWNjZXNzKXtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHR9ZWxzZXtcblx0XHRcdCQoJy5wYXNzd29yZC12YWxpZGF0ZScpLnJlbW92ZSgpO1xuXHRcdH1cblx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkuY2hlY2tEZWxldGVBbGxDb25kaXRpb25zKCk7XG5cdH0sXG5cdGluaXRSdWxlcygpIHtcblx0XHRpZigkKCcjU1NIRGlzYWJsZVBhc3N3b3JkTG9naW5zJykucGFyZW50KCkuY2hlY2tib3goJ2lzIGNoZWNrZWQnKSl7XG5cdFx0XHRnZW5lcmFsU2V0dGluZ3NNb2RpZnkudmFsaWRhdGVSdWxlcy5TU0hQYXNzd29yZC5ydWxlcyA9IGdlbmVyYWxTZXR0aW5nc01vZGlmeS5hZGRpdGlvbmFsU3NoVmFsaWRSdWxlc05vUGFzcztcblx0XHR9ZWxzZXtcblx0XHRcdGdlbmVyYWxTZXR0aW5nc01vZGlmeS52YWxpZGF0ZVJ1bGVzLlNTSFBhc3N3b3JkLnJ1bGVzID0gZ2VuZXJhbFNldHRpbmdzTW9kaWZ5LmFkZGl0aW9uYWxTc2hWYWxpZFJ1bGVzUGFzcztcblx0XHR9XG5cdH0sXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdGdlbmVyYWxTZXR0aW5nc01vZGlmeS5pbml0UnVsZXMoKTtcblx0XHRGb3JtLiRmb3JtT2JqIFx0XHRcdD0gZ2VuZXJhbFNldHRpbmdzTW9kaWZ5LiRmb3JtT2JqO1xuXHRcdEZvcm0udXJsIFx0XHRcdFx0PSBgJHtnbG9iYWxSb290VXJsfWdlbmVyYWwtc2V0dGluZ3Mvc2F2ZWA7XG5cdFx0Rm9ybS52YWxpZGF0ZVJ1bGVzIFx0XHQ9IGdlbmVyYWxTZXR0aW5nc01vZGlmeS52YWxpZGF0ZVJ1bGVzO1xuXHRcdEZvcm0uY2JCZWZvcmVTZW5kRm9ybSBcdD0gZ2VuZXJhbFNldHRpbmdzTW9kaWZ5LmNiQmVmb3JlU2VuZEZvcm07XG5cdFx0Rm9ybS5jYkFmdGVyU2VuZEZvcm0gXHQ9IGdlbmVyYWxTZXR0aW5nc01vZGlmeS5jYkFmdGVyU2VuZEZvcm07XG5cdFx0Rm9ybS5pbml0aWFsaXplKCk7XG5cdH1cbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0Z2VuZXJhbFNldHRpbmdzTW9kaWZ5LmluaXRpYWxpemUoKTtcbn0pOyJdfQ==