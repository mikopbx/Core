"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */
var sndPlayer = {
  slider: document.getElementById('audio-player'),
  duration: 0,
  // Duration of audio clip
  $pButton: $('#play-button'),
  // play button
  $slider: $('#play-slider'),
  $playerSegment: $('#audio-player-segment'),
  initialize: function initialize() {
    // play button event listenter
    sndPlayer.$pButton.on('click', function (e) {
      e.preventDefault();
      sndPlayer.play();
    }); // timeupdate event listener

    sndPlayer.slider.addEventListener('timeupdate', sndPlayer.cbTimeUpdate, false); // Gets audio file duration

    sndPlayer.slider.addEventListener('canplaythrough', sndPlayer.cbCanPlayThrough, false);
    sndPlayer.$slider.range({
      min: 0,
      max: 100,
      start: 0,
      onChange: sndPlayer.cbOnSliderChange
    });
  },
  UpdateSource: function UpdateSource(newSource) {
    sndPlayer.slider.getElementsByTagName('source')[0].src = newSource;
    sndPlayer.slider.pause();
    sndPlayer.slider.load();
    sndPlayer.slider.oncanplaythrough = sndPlayer.cbCanPlayThrough;
  },
  cbCanPlayThrough: function cbCanPlayThrough() {
    sndPlayer.duration = sndPlayer.slider.duration; // console.log(`New duration ${sndPlayer.slider.readyState}`);

    if (sndPlayer.duration > 0) {
      sndPlayer.$slider.range('set value', 0);
      sndPlayer.$playerSegment.show();
    } else {
      sndPlayer.$playerSegment.hide();
    }
  },
  cbOnSliderChange: function cbOnSliderChange(newVal, meta) {
    if (meta.triggeredByUser && Number.isFinite(sndPlayer.slider.duration)) {
      sndPlayer.slider.removeEventListener('timeupdate', sndPlayer.cbTimeUpdate, false);
      sndPlayer.slider.currentTime = sndPlayer.slider.duration * newVal / 100;
      sndPlayer.slider.addEventListener('timeupdate', sndPlayer.cbTimeUpdate, false);
    }
  },
  // timeUpdate
  // Synchronizes playhead position with current point in audio
  cbTimeUpdate: function cbTimeUpdate() {
    if (Number.isFinite(sndPlayer.slider.duration)) {
      var percent = sndPlayer.slider.currentTime / sndPlayer.slider.duration;
      var rangePosition = Math.round(percent * 100);
      sndPlayer.$slider.range('set value', rangePosition);

      if (rangePosition === 100) {
        sndPlayer.$pButton.html('<i class="icon play"></i>');
      }
    }
  },
  // Play and Pause
  play: function play() {
    // start music
    if (sndPlayer.slider.paused && sndPlayer.slider.duration) {
      sndPlayer.slider.play(); // remove play, add pause

      sndPlayer.$pButton.html('<i class="icon pause"></i>');
    } else {
      // pause music
      sndPlayer.slider.pause(); // remove pause, add play

      sndPlayer.$pButton.html('<i class="icon play"></i>');
    }
  }
};
$(document).ready(function () {
  sndPlayer.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Tb3VuZEZpbGVzL3NvdW5kLWZpbGUtbW9kaWZ5LXBsYXllci5qcyJdLCJuYW1lcyI6WyJzbmRQbGF5ZXIiLCJzbGlkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZHVyYXRpb24iLCIkcEJ1dHRvbiIsIiQiLCIkc2xpZGVyIiwiJHBsYXllclNlZ21lbnQiLCJpbml0aWFsaXplIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNiVGltZVVwZGF0ZSIsImNiQ2FuUGxheVRocm91Z2giLCJyYW5nZSIsIm1pbiIsIm1heCIsInN0YXJ0Iiwib25DaGFuZ2UiLCJjYk9uU2xpZGVyQ2hhbmdlIiwiVXBkYXRlU291cmNlIiwibmV3U291cmNlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzcmMiLCJwYXVzZSIsImxvYWQiLCJvbmNhbnBsYXl0aHJvdWdoIiwic2hvdyIsImhpZGUiLCJuZXdWYWwiLCJtZXRhIiwidHJpZ2dlcmVkQnlVc2VyIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY3VycmVudFRpbWUiLCJwZXJjZW50IiwicmFuZ2VQb3NpdGlvbiIsIk1hdGgiLCJyb3VuZCIsImh0bWwiLCJwYXVzZWQiLCJyZWFkeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBTUEsU0FBUyxHQUFHO0FBQ2pCQyxFQUFBQSxNQUFNLEVBQUVDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixjQUF4QixDQURTO0FBRWpCQyxFQUFBQSxRQUFRLEVBQUUsQ0FGTztBQUVKO0FBQ2JDLEVBQUFBLFFBQVEsRUFBRUMsQ0FBQyxDQUFDLGNBQUQsQ0FITTtBQUdZO0FBQzdCQyxFQUFBQSxPQUFPLEVBQUVELENBQUMsQ0FBQyxjQUFE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cGhvbmUgc3lzdGVtIGZvciBzbWFsbCBidXNpbmVzc1xuICogQ29weXJpZ2h0IChDKSAyMDE3LTIwMjAgQWxleGV5IFBvcnRub3YgYW5kIE5pa29sYXkgQmVrZXRvdlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS5cbiAqIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuY29uc3Qgc25kUGxheWVyID0ge1xuXHRzbGlkZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpby1wbGF5ZXInKSxcblx0ZHVyYXRpb246IDAsIC8vIER1cmF0aW9uIG9mIGF1ZGlvIGNsaXBcblx0JHBCdXR0b246ICQoJyNwbGF5LWJ1dHRvbicpLCAvLyBwbGF5IGJ1dHRvblxuXHQkc2xpZGVyOiAkKCcjcGxheS1zbGlkZXInKSxcblx0JHBsYXllclNlZ21lbnQ6ICQoJyNhdWRpby1wbGF5ZXItc2VnbWVudCcpLFxuXHRpbml0aWFsaXplKCkge1xuXHRcdC8vIHBsYXkgYnV0dG9uIGV2ZW50IGxpc3RlbnRlclxuXHRcdHNuZFBsYXllci4kcEJ1dHRvbi5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0c25kUGxheWVyLnBsYXkoKTtcblx0XHR9KTtcblx0XHQvLyB0aW1ldXBkYXRlIGV2ZW50IGxpc3RlbmVyXG5cdFx0c25kUGxheWVyLnNsaWRlci5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgc25kUGxheWVyLmNiVGltZVVwZGF0ZSwgZmFsc2UpO1xuXG5cdFx0Ly8gR2V0cyBhdWRpbyBmaWxlIGR1cmF0aW9uXG5cdFx0c25kUGxheWVyLnNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIHNuZFBsYXllci5jYkNhblBsYXlUaHJvdWdoLCBmYWxzZSk7XG5cblx0XHRzbmRQbGF5ZXIuJHNsaWRlci5yYW5nZSh7XG5cdFx0XHRtaW46IDAsXG5cdFx0XHRtYXg6IDEwMCxcblx0XHRcdHN0YXJ0OiAwLFxuXHRcdFx0b25DaGFuZ2U6IHNuZFBsYXllci5jYk9uU2xpZGVyQ2hhbmdlLFxuXHRcdH0pO1xuXHR9LFxuXHRVcGRhdGVTb3VyY2UobmV3U291cmNlKSB7XG5cdFx0c25kUGxheWVyLnNsaWRlci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc291cmNlJylbMF0uc3JjID0gbmV3U291cmNlO1xuXHRcdHNuZFBsYXllci5zbGlkZXIucGF1c2UoKTtcblx0XHRzbmRQbGF5ZXIuc2xpZGVyLmxvYWQoKTtcblx0XHRzbmRQbGF5ZXIuc2xpZGVyLm9uY2FucGxheXRocm91Z2ggPSBzbmRQbGF5ZXIuY2JDYW5QbGF5VGhyb3VnaDtcblx0fSxcblx0Y2JDYW5QbGF5VGhyb3VnaCgpIHtcblx0XHRzbmRQbGF5ZXIuZHVyYXRpb24gPSBzbmRQbGF5ZXIuc2xpZGVyLmR1cmF0aW9uO1xuXHRcdC8vIGNvbnNvbGUubG9nKGBOZXcgZHVyYXRpb24gJHtzbmRQbGF5ZXIuc2xpZGVyLnJlYWR5U3RhdGV9YCk7XG5cdFx0aWYgKHNuZFBsYXllci5kdXJhdGlvbiA+IDApIHtcblx0XHRcdHNuZFBsYXllci4kc2xpZGVyLnJhbmdlKCdzZXQgdmFsdWUnLCAwKTtcblx0XHRcdHNuZFBsYXllci4kcGxheWVyU2VnbWVudC5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNuZFBsYXllci4kcGxheWVyU2VnbWVudC5oaWRlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdGNiT25TbGlkZXJDaGFuZ2UobmV3VmFsLCBtZXRhKSB7XG5cdFx0aWYgKG1ldGEudHJpZ2dlcmVkQnlVc2VyICYmIE51bWJlci5pc0Zpbml0ZShzbmRQbGF5ZXIuc2xpZGVyLmR1cmF0aW9uKSkge1xuXHRcdFx0c25kUGxheWVyLnNsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgc25kUGxheWVyLmNiVGltZVVwZGF0ZSwgZmFsc2UpO1xuXHRcdFx0c25kUGxheWVyLnNsaWRlci5jdXJyZW50VGltZSA9IChzbmRQbGF5ZXIuc2xpZGVyLmR1cmF0aW9uICogbmV3VmFsKSAvIDEwMDtcblx0XHRcdHNuZFBsYXllci5zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIHNuZFBsYXllci5jYlRpbWVVcGRhdGUsIGZhbHNlKTtcblx0XHR9XG5cdH0sXG5cdC8vIHRpbWVVcGRhdGVcblx0Ly8gU3luY2hyb25pemVzIHBsYXloZWFkIHBvc2l0aW9uIHdpdGggY3VycmVudCBwb2ludCBpbiBhdWRpb1xuXHRjYlRpbWVVcGRhdGUoKSB7XG5cdFx0aWYgKE51bWJlci5pc0Zpbml0ZShzbmRQbGF5ZXIuc2xpZGVyLmR1cmF0aW9uKSkge1xuXHRcdFx0Y29uc3QgcGVyY2VudCA9IHNuZFBsYXllci5zbGlkZXIuY3VycmVudFRpbWUgLyBzbmRQbGF5ZXIuc2xpZGVyLmR1cmF0aW9uO1xuXHRcdFx0Y29uc3QgcmFuZ2VQb3NpdGlvbiA9IE1hdGgucm91bmQoKHBlcmNlbnQpICogMTAwKTtcblx0XHRcdHNuZFBsYXllci4kc2xpZGVyLnJhbmdlKCdzZXQgdmFsdWUnLCByYW5nZVBvc2l0aW9uKTtcblx0XHRcdGlmIChyYW5nZVBvc2l0aW9uID09PSAxMDApIHtcblx0XHRcdFx0c25kUGxheWVyLiRwQnV0dG9uLmh0bWwoJzxpIGNsYXNzPVwiaWNvbiBwbGF5XCI+PC9pPicpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBQbGF5IGFuZCBQYXVzZVxuXHRwbGF5KCkge1xuXHRcdC8vIHN0YXJ0IG11c2ljXG5cdFx0aWYgKHNuZFBsYXllci5zbGlkZXIucGF1c2VkICYmIHNuZFBsYXllci5zbGlkZXIuZHVyYXRpb24pIHtcblx0XHRcdHNuZFBsYXllci5zbGlkZXIucGxheSgpO1xuXHRcdFx0Ly8gcmVtb3ZlIHBsYXksIGFkZCBwYXVzZVxuXHRcdFx0c25kUGxheWVyLiRwQnV0dG9uLmh0bWwoJzxpIGNsYXNzPVwiaWNvbiBwYXVzZVwiPjwvaT4nKTtcblx0XHR9IGVsc2UgeyAvLyBwYXVzZSBtdXNpY1xuXHRcdFx0c25kUGxheWVyLnNsaWRlci5wYXVzZSgpO1xuXHRcdFx0Ly8gcmVtb3ZlIHBhdXNlLCBhZGQgcGxheVxuXHRcdFx0c25kUGxheWVyLiRwQnV0dG9uLmh0bWwoJzxpIGNsYXNzPVwiaWNvbiBwbGF5XCI+PC9pPicpO1xuXHRcdH1cblx0fSxcblxufTtcblxuXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cdHNuZFBsYXllci5pbml0aWFsaXplKCk7XG59KTtcbiJdfQ==